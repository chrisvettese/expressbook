(this["webpackJsonphotel-ui"]=this["webpackJsonphotel-ui"]||[]).push([[0],{188:function(e,t,n){"use strict";n.r(t),n.d(t,"TitleBarCustomer",(function(){return V})),n.d(t,"TitleBarEmployee",(function(){return $}));var a=n(0),r=n(14),s=n(33),c=n(20),i=n(7),o=n(217),l=n(128),d=n(234),u=n(223),j=n(2),b=Object(o.a)((function(){return{sinCentre:{paddingTop:"3em",display:"flex",alignItems:"center",justifyContent:"center"},buttonCentre:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}}}));var m=Object(o.a)((function(){return{sinCentre:{paddingTop:"3em",display:"flex",alignItems:"center",justifyContent:"center"},buttonCentre:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}}}));var h=n(232),p=n(18),x=n.n(p),f=n(25),O=Object(o.a)((function(){return{centre:{paddingTop:"5em",display:"flex",alignItems:"center",justifyContent:"center"},buttonCentre:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"}}}));var g=Object(o.a)((function(){return{centre:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center"},buttonCentre:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"2em"},buttonSpacing:{marginLeft:"1.5em",marginRight:"1.5em"}}}));var v=n(16),y=n(224),k=n(225),N=n(130),C=n(226),S=n(227),_=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1em"},brandPaper:{marginTop:"2em",marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center"},hotelTitle:{fontWeight:"bold",fontSize:"1.5em",width:"100%"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"38em",width:"85%",marginTop:"10em",marginLeft:"10em"},divider:{marginLeft:"1em",marginRight:"1em"},brandGrid:{width:"80%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}}}));var T=n(242),I=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1em",width:"100%"},brandPaper:{marginTop:"2em",marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center"},hotelTitle:{fontWeight:"bold",fontSize:"1.5em"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"38em",width:"85%",marginTop:"10em",marginLeft:"10em"},divider:{marginLeft:"1em",marginRight:"1em"},hotelGrid:{width:"80%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}}}));var w=n(239),D=n(228),E=n(235),B=n(237),R=n(236),A=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},brandPaper:{marginTop:"2em",marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center"},hotelTitle:{fontWeight:"bold",fontSize:"1.5em"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"38em",width:"85%",marginTop:"10em",marginLeft:"10em"},divider:{marginLeft:"1em",marginRight:"1em"},hotelGrid:{width:"70%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},radioGroup:{width:"100%",alignItems:"center",justifyContent:"center",marginBottom:"1em"}}}));var P=n(107),W=n(240),G=n(238),X=n(230),L=n(231),M=n(23),z=n(233),F=n(78),H=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"1em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},centreTitleNoSpace:{fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},smallerTitle:{fontSize:"1.7em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",marginBottom:"0.5em"},brandPaper:{marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"1em"},hotelTitle:{fontWeight:"bold",fontSize:"1.5em"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"50em",width:"85%",marginTop:"10em"},outsideGrid:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",marginBottom:"2em"},divider:{marginLeft:"1em",marginRight:"1em"},hotelGrid:{width:"70%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},dateGrid:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},gridParent:{display:"flex",justifyContent:"center",width:"100%"},dialogDiv:{marginLeft:"0.5em",marginRight:"0.5em"},dialogHeader:{fontWeight:"bold"},dialogTitle:{fontSize:"1.8em",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},dialogAddress:{marginLeft:"0.5em",marginRight:"0.5em",fontStyle:"italic"}}})),J=Object(o.a)((function(e){return{arrow:{color:e.palette.common.black},tooltip:{backgroundColor:e.palette.common.black}}}));function U(e){var t=J();return Object(j.jsx)(W.a,Object(P.a)({arrow:!0,classes:t},e))}var Y=function(e){var t=e.dialogOpen,n=e.setDialogOpen,a=e.roomToBook,r=e.classes,s=e.location,c=e.checkInDateToBook,i=e.checkOutDateToBook,o=e.disableBookRoomButton,d=e.bookRoom;return Object(j.jsxs)(G.a,{onClose:function(){return n(!1)},"aria-labelledby":"simple-dialog-title",open:t,children:[Object(j.jsx)(X.a,{id:"dialog-title",className:r.dialogTitle,children:Object(j.jsx)(l.a,{className:r.dialogTitle,children:"Confirm Room Booking"})}),Object(j.jsx)("div",{className:r.dialogAddress,children:Object(j.jsx)(l.a,{align:"center",children:s.state.address})}),Object(j.jsx)("br",{}),Object(j.jsx)(S.a,{}),Object(j.jsx)(l.a,{align:"center",className:r.dialogHeader,children:"Customer Info"}),Object(j.jsx)(S.a,{}),Object(j.jsxs)("div",{className:r.dialogDiv,children:[Object(j.jsx)(l.a,{children:s.state.customerName}),Object(j.jsx)(l.a,{children:s.state.customerAddress})]}),Object(j.jsx)("br",{}),Object(j.jsx)(S.a,{}),Object(j.jsx)(l.a,{align:"center",className:r.dialogHeader,children:"Room Details"}),Object(j.jsx)(S.a,{}),Object(j.jsxs)("div",{className:r.dialogDiv,children:[Object(j.jsxs)(l.a,{children:["Room type: ",a.title]}),Object(j.jsxs)(l.a,{children:[c," to ",i]}),Object(j.jsxs)(l.a,{children:["Amenities: ",a.amenities.join(", ")]}),Object(j.jsxs)(l.a,{children:["View: ",a.view]}),Object(j.jsxs)(l.a,{children:["Extendable: ",a.is_extendable?"Yes":"No"]})]}),Object(j.jsx)("br",{}),Object(j.jsxs)(L.a,{children:[Object(j.jsx)(u.a,{disabled:o,onClick:function(){return d(a.type_id)},variant:"contained",color:"primary",children:"Book Room"}),Object(j.jsx)(u.a,{onClick:function(){return n(!1)},variant:"contained",color:"secondary",children:"Cancel"})]})]})};n(185).config();var K=Object(o.a)((function(){return{title:{fontSize:"2.5em",fontWeight:"bold",paddingLeft:"1em"}}}));function V(){var e=K();return Object(j.jsx)(h.a,{position:"static",children:Object(j.jsx)(l.a,{className:e.title,children:"ExpressBook Customer Portal"})})}function $(){var e=K();return Object(j.jsx)(h.a,{position:"static",children:Object(j.jsx)(l.a,{className:e.title,children:"ExpressBook Employee Portal"})})}r.render(Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(s.a,{children:Object(j.jsxs)(c.c,{children:[Object(j.jsx)(c.a,{exact:!0,path:"/ui/employee",component:function(){var e=b(),t=Object(c.f)(),n=Object(a.useState)(""),r=Object(i.a)(n,2),s=r[0],o=r[1],m=Object(a.useState)(!1),h=Object(i.a)(m,2),p=h[0],x=h[1],f=Object(a.useState)(""),O=Object(i.a)(f,2),g=O[0],v=O[1],y=/^[0-9]{3}-[0-9]{3}-[0-9]{3}$/;function k(){return!y.test(s)&&0!==s.length}function N(){x(!0),fetch("http://localhost:1234/employees/"+s).then((function(e){200===e.status?e.json().then((function(e){t.push("/ui/customer/welcome",{customerSIN:e.customer_sin,customerName:e.customer_name,customerAddress:e.customer_address})})):(v("Unable to sign in. Please contact the hotel manager or database admin if you think this is a problem."),x(!1))})).catch((function(e){console.log("Error:",e),x(!1)}))}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(V,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:"Sign In"}),Object(j.jsx)("div",{className:e.sinCentre,children:Object(j.jsx)(l.a,{children:"Please sign in to access the hotel management system:"})}),Object(j.jsx)("div",{className:e.sinCentre,children:Object(j.jsx)(d.a,{error:k(),helperText:k()?"SIN must have format XXX-XXX-XXX":"",onChange:function(e){return o(e.currentTarget.value)},onKeyPress:function(e){return function(e){"Enter"===e.key&&y.test(s)&&N()}(e)},id:"outlined-basic",label:"Social Insurance Number",variant:"outlined",value:s})}),Object(j.jsx)("div",{className:e.buttonCentre,children:Object(j.jsx)(u.a,{variant:"contained",onClick:function(){return N()},disabled:!y.test(s)||p,children:"Sign In"})}),Object(j.jsx)(l.a,{style:{color:"red"},children:g})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer",component:function(){var e=m(),t=Object(c.f)(),n=Object(a.useState)(""),r=Object(i.a)(n,2),s=r[0],o=r[1],b=Object(a.useState)(!1),h=Object(i.a)(b,2),p=h[0],x=h[1],f=/^[0-9]{3}-[0-9]{3}-[0-9]{3}$/;function O(){return!f.test(s)&&0!==s.length}function g(){x(!0),fetch("http://localhost:1234/customers/"+s).then((function(e){404===e.status?t.push("/ui/customer/name",{customerSIN:s}):e.json().then((function(e){t.push("/ui/customer/welcome",{customerSIN:e.customer_sin,customerName:e.customer_name,customerAddress:e.customer_address})}))})).catch((function(e){console.log("Error:",e),x(!1)}))}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(V,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:"Sign In"}),Object(j.jsx)("div",{className:e.sinCentre,children:Object(j.jsx)(l.a,{children:"To begin searching destinations, enter your social insurance number:"})}),Object(j.jsx)("div",{className:e.sinCentre,children:Object(j.jsx)(d.a,{error:O(),helperText:O()?"SIN must have format XXX-XXX-XXX":"",onChange:function(e){return o(e.currentTarget.value)},onKeyPress:function(e){return function(e){"Enter"===e.key&&f.test(s)&&g()}(e)},id:"outlined-basic",label:"Social Insurance Number",variant:"outlined",value:s})}),Object(j.jsx)("div",{className:e.buttonCentre,children:Object(j.jsx)(u.a,{variant:"contained",onClick:function(){return g()},disabled:!f.test(s)||p,children:"Sign In"})})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/name",component:function(){var e=O(),t=Object(c.g)(),n=Object(c.f)(),r=Object(a.useState)(""),s=Object(i.a)(r,2),o=s[0],b=s[1],m=Object(a.useState)(""),h=Object(i.a)(m,2),p=h[0],g=h[1],v=Object(a.useState)(!1),y=Object(i.a)(v,2),k=y[0],N=y[1],C=Object(a.useState)(!1),S=Object(i.a)(C,2),_=S[0],T=S[1],I=Object(a.useState)(!1),w=Object(i.a)(I,2),D=w[0],E=w[1];function B(){return(B=Object(f.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==o.length||0!==p.length){e.next=5;break}N(!0),T(!0),e.next=27;break;case 5:if(0===o.length||0!==p.length){e.next=10;break}N(!1),T(!0),e.next=27;break;case 10:if(0!==o.length||0===p.length){e.next=15;break}N(!0),T(!1),e.next=27;break;case 15:return E(!0),e.prev=16,e.next=19,fetch("http://localhost:1234/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_sin:t.state.customerSIN,customer_name:o,customer_address:p})});case 19:201===e.sent.status&&n.push("/ui/customer/welcome",{customerSIN:t.state.customerSIN,customerName:o,customerAddress:p}),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(16),console.error("Error:",e.t0),E(!1);case 27:case"end":return e.stop()}}),e,null,[[16,23]])})))).apply(this,arguments)}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(V,{}),Object(j.jsx)("div",{className:e.centre,children:Object(j.jsx)(l.a,{children:"Welcome to ExpressBook. Please provide some information about yourself:"})}),Object(j.jsx)("div",{className:e.centre,children:Object(j.jsx)(d.a,{label:"Full Name",variant:"outlined",value:o,error:k,helperText:k?"Must provide name":"",onChange:function(e){return b(e.currentTarget.value)}})}),Object(j.jsx)("div",{className:e.centre,children:Object(j.jsx)(d.a,{label:"Address",variant:"outlined",value:p,error:_,helperText:_?"Must provide address":"",onChange:function(e){return g(e.currentTarget.value)}})}),Object(j.jsx)("div",{className:e.buttonCentre,children:Object(j.jsx)(u.a,{variant:"contained",onClick:function(){return function(){return B.apply(this,arguments)}()},disabled:D,children:"Sign In"})})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/welcome",component:function(){var e=g(),t=Object(c.g)(),n=Object(c.f)(),r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],d=s[1],b=Object(a.useState)(!1),m=Object(i.a)(b,2),h=m[0],p=m[1],O="Welcome, "+t.state.customerName,v="Your address: "+t.state.customerAddress;function y(){return(y=Object(f.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,fetch("http://localhost:1234/brands");case 4:if(200===(a=e.sent).status){e.next=8;break}return d(!1),e.abrupt("return");case 8:return e.next=10,a.json();case 10:a=e.sent,n.push("/ui/customer/brands",{customerSIN:t.state.customerSIN,customerAddress:t.state.customerAddress,customerName:t.state.customerName,response:a}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error:",e.t0),d(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function k(){return(k=Object(f.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,fetch("http://localhost:1234/customers/"+t.state.customerSIN+"/reservations");case 4:if(200===(a=e.sent).status){e.next=8;break}return p(!1),e.abrupt("return");case 8:return e.next=10,a.json();case 10:a=e.sent,n.push("/ui/customer/reservations",{customerName:t.state.customerName,customerSIN:t.state.customerSIN,customerAddress:t.state.customerAddress,response:a}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error:",e.t0),p(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(V,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:O}),Object(j.jsx)(l.a,{className:e.centre,children:v}),Object(j.jsxs)("div",{className:e.buttonCentre,children:[Object(j.jsx)(u.a,{variant:"contained",className:e.buttonSpacing,onClick:function(){return function(){return y.apply(this,arguments)}()},disabled:o,children:"Find A Hotel"}),Object(j.jsx)(u.a,{variant:"contained",onClick:function(){return function(){return k.apply(this,arguments)}()},disabled:h,children:"My Reservations"})]})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/brands",component:function(){for(var e=_(),t=Object(c.g)(),n=Object(c.f)(),r=[],s=0;s<t.state.response.length;s++)r.push(!1);var o=Object(a.useState)(r),d=Object(i.a)(o,2),b=d[0],m=d[1];function h(){return(h=Object(f.a)(x.a.mark((function e(a){var r,s,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object(v.a)(b))[a]=!0,m(r),e.prev=3,e.next=6,fetch("http://localhost:1234/brands/"+t.state.response[a].brand_id+"/hotels");case 6:if(200===(s=e.sent).status){e.next=12;break}return(c=Object(v.a)(b))[a]=!1,m(c),e.abrupt("return");case 12:return e.next=14,s.json();case 14:s=e.sent,n.push("/ui/customer/hotels",{customerSIN:t.state.customerSIN,customerName:t.state.customerName,customerAddress:t.state.customerAddress,response:s,brandName:t.state.response[a].name}),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("Error:",e.t0),(i=Object(v.a)(b))[a]=!1,m(i);case 24:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}return Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(V,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:"Select a hotel brand to view hotels:"}),Object(j.jsx)(y.a,{cols:1,cellHeight:200,className:e.grid,children:t.state.response.map((function(t,n){return Object(j.jsx)(k.a,{cols:1,children:Object(j.jsx)(N.a,{elevation:3,className:e.brandPaper,children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:e.brandGrid,children:[Object(j.jsx)(l.a,{className:e.hotelTitle,children:t.name}),Object(j.jsxs)(l.a,{children:["Headquarters Address: ",t.main_office_address]}),Object(j.jsxs)(l.a,{children:["Email: ",t.email_address]}),Object(j.jsxs)(l.a,{children:["Phone: ",t.phone_number]}),Object(j.jsxs)(l.a,{children:["Number of hotels: ",t.number_of_hotels]})]}),Object(j.jsx)(S.a,{orientation:"vertical",flexItem:!0,className:e.divider}),Object(j.jsx)(C.a,{item:!0,xs:2,children:Object(j.jsx)(C.a,{className:e.priceDiv,children:Object(j.jsx)(u.a,{variant:"contained",onClick:function(){return function(e){return h.apply(this,arguments)}(n)},disabled:b[n],children:"Select"})})})]})},t.brand_id)},t.brand_id)}))})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/hotels",component:function(){for(var e=I(),t=Object(c.g)(),n=Object(c.f)(),r=[],s=0;s<t.state.response.length;s++)r.push(!1);var o=Object(a.useState)(r),d=Object(i.a)(o,2),b=d[0],m=d[1];function h(){return(h=Object(f.a)(x.a.mark((function e(a){var r,s,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object(v.a)(b))[a]=!0,m(r),e.prev=3,e.next=6,fetch("http://localhost:1234/hotels/"+t.state.response[a].hotel_id+"/rooms");case 6:if(200===(s=e.sent).status){e.next=12;break}return(c=Object(v.a)(b))[a]=!1,m(c),e.abrupt("return");case 12:return e.next=14,s.json();case 14:s=e.sent,n.push("/ui/customer/rooms",{customerSIN:t.state.customerSIN,customerName:t.state.customerName,customerAddress:t.state.customerAddress,response:s,brandName:t.state.brandName,address:t.state.response[a].physical_address,hotelID:t.state.response[a].hotel_id}),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("Error:",e.t0),(i=Object(v.a)(b))[a]=!1,m(i);case 24:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}return Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(V,{}),Object(j.jsxs)(l.a,{className:e.centreTitle,children:[t.state.brandName," Hotels"]}),Object(j.jsx)(y.a,{cols:1,cellHeight:175,className:e.grid,children:t.state.response.map((function(t,n){return Object(j.jsx)(k.a,{cols:1,children:Object(j.jsx)(N.a,{elevation:3,className:e.brandPaper,children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:e.hotelGrid,children:[Object(j.jsx)(l.a,{className:e.hotelTitle,children:t.physical_address}),Object(j.jsxs)(l.a,{children:["Email: ",t.email_address]}),Object(j.jsxs)(l.a,{children:["Phone: ",t.phone_number]}),Object(j.jsxs)(l.a,{children:["Number of rooms: ",t.number_of_rooms]})]}),Object(j.jsx)(S.a,{orientation:"vertical",flexItem:!0,className:e.divider}),Object(j.jsx)(C.a,{item:!0,xs:2,children:Object(j.jsxs)(C.a,{className:e.priceDiv,children:[Object(j.jsx)(T.a,{value:t.star_category,readOnly:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)(u.a,{variant:"contained",onClick:function(){return function(e){return h.apply(this,arguments)}(n)},disabled:b[n],children:"View Details"})]})})]})},t.hotel_id)},t.hotel_id)}))})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/reservations",component:function(){var e=A(),t=Object(c.g)();t.state.response.sort((function(e,t){return e.check_in_day>t.check_in_day?1:-1}));for(var n=[],r=[],s=[],o=[],d=0;d<t.state.response.length;d++)o.push(t.state.response[d].booking_id);t.state.response.forEach((function(e,a){"Renting"===e.status?n.push(t.state.response[a].booking_id):"Booked"===e.status?r.push(t.state.response[a].booking_id):s.push(t.state.response[a].booking_id)}));for(var b=[],m=0;m<t.state.response.length;m++)b.push(!1);var h=Object(a.useState)(b),p=Object(i.a)(h,2),O=p[0],g=p[1],_=Object(a.useState)(0),T=Object(i.a)(_,2),I=T[0],P=T[1],W=Object(a.useState)(!1),G=Object(i.a)(W,2),X=G[0],L=G[1],M=Object(a.useState)(""),z=Object(i.a)(M,2),F=z[0],H=z[1],J=Object(a.useState)("success"),U=Object(i.a)(J,2),Y=U[0],K=U[1],$=Object(a.useState)(o),q=Object(i.a)($,2),Q=q[0],Z=q[1];function ee(e,t){H(e),K(t),L(!0)}function te(){L(!1)}function ne(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(f.a)(x.a.mark((function e(a,c){var i,o,l,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(v.a)(O),o=ce(c),i[o.index]=!0,g(i),e.prev=4,e.next=7,fetch("http://localhost:1234/customers/"+t.state.customerSIN+"/reservations/"+o.reservation.booking_id,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})});case 7:204===e.sent.status?"Archived"===a?(n.splice(n.indexOf(c),1),o.reservation.status="Archived",s.push(c),se(I),ee("Successfully checked out of hotel","success")):(r.splice(r.indexOf(c),1),o.reservation.status="Cancelled",s.push(c),se(I),ee("Successfully cancelled room booking","success")):((l=Object(v.a)(O))[o.index]=!1,g(l),ee("Error: Unable to modify reservation","error")),e.next=18;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("Error:",e.t0),(d=Object(v.a)(O))[o.index]=!1,g(d),ee("Error: Unable to modify reservation","error");case 18:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function re(e){var t=ce(e.bookingID);return"Renting"===t.reservation.status?Object(j.jsx)(u.a,{variant:"contained",onClick:function(){return ne("Archived",e.bookingID)},disabled:O[t.index],children:"Check Out"}):"Booked"===t.reservation.status?Object(j.jsx)(u.a,{variant:"contained",onClick:function(){return ne("Cancelled",e.bookingID)},disabled:O[t.index],children:"Cancel"}):Object(j.jsx)(j.Fragment,{})}function se(e){Z([].concat(0===e?o:1===e?n:2===e?r:s))}function ce(e){for(var n=0;n<t.state.response.length;n++){var a=t.state.response[n];if(a.booking_id===e)return{reservation:a,index:n}}return{reservation:{booking_id:-1,physical_address:"",date_of_registration:"",check_in_day:"",check_out_day:"",status:"",title:"",is_extendable:!1,amenities:[],view:"",price:""},index:-1}}function ie(t){return Object(j.jsx)(y.a,{cols:1,cellHeight:220,className:e.grid,children:t.reservations.map((function(t){var n=ce(t).reservation,a=new Date(n.check_in_day.replace("-","/")),r=new Date(n.check_out_day.replace("-","/")),s=(Math.round(Math.abs(+a-+r)/24/60/60/1e3)*parseFloat(n.price)).toFixed(2);return 0===n.amenities.length&&n.amenities.push("None"),Object(j.jsx)(k.a,{cols:1,children:Object(j.jsx)(N.a,{elevation:3,className:e.brandPaper,children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:e.hotelGrid,children:[Object(j.jsxs)(l.a,{className:e.hotelTitle,children:["Room: ",n.title," | ",n.check_in_day," to ",n.check_out_day]}),Object(j.jsx)(l.a,{children:n.physical_address}),Object(j.jsxs)(l.a,{children:["Booking status: ",n.status]}),Object(j.jsxs)(l.a,{children:["Amenities: ",n.amenities.join(", ")]}),Object(j.jsxs)(l.a,{children:["View: ",n.view]}),Object(j.jsxs)(l.a,{children:["Extendable: ",n.is_extendable?"Yes":"No"]})]}),Object(j.jsx)(S.a,{orientation:"vertical",flexItem:!0,className:e.divider}),Object(j.jsx)(C.a,{item:!0,xs:3,children:Object(j.jsxs)(C.a,{className:e.priceDiv,children:[Object(j.jsxs)(l.a,{children:["Booked on ",n.date_of_registration]}),Object(j.jsx)(l.a,{className:e.hotelTitle,children:"Total price:"}),Object(j.jsxs)(l.a,{className:e.hotelTitle,children:["$",s]}),Object(j.jsx)("br",{}),Object(j.jsx)(re,{bookingID:t})]})})]})},n.booking_id)},n.booking_id)}))})}return Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(V,{}),Object(j.jsxs)(l.a,{className:e.centreTitle,children:["My Reservations - ",t.state.customerName]}),Object(j.jsxs)(w.a,{className:e.radioGroup,value:I,onChange:function(e){return function(e){var t=parseInt(e.target.value);P(t),se(t)}(e)},row:!0,children:[Object(j.jsx)(l.a,{children:"Filter by:\xa0\xa0\xa0"}),Object(j.jsx)(D.a,{value:0,control:Object(j.jsx)(E.a,{}),label:"All Reservations"}),Object(j.jsx)(D.a,{value:1,control:Object(j.jsx)(E.a,{}),label:"Ongoing"}),Object(j.jsx)(D.a,{value:2,control:Object(j.jsx)(E.a,{}),label:"Upcoming"}),Object(j.jsx)(D.a,{value:3,control:Object(j.jsx)(E.a,{}),label:"Cancelled/Archived"})]}),Object(j.jsx)(ie,{reservations:Q}),Object(j.jsx)(B.a,{open:X,autoHideDuration:6e3,onClose:te,children:Object(j.jsx)(R.a,{onClose:te,severity:Y,children:F})})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/rooms",component:function(){for(var e=H(),t=Object(c.g)(),n=[],r=0;r<t.state.response.length;r++)n.push(!0);var s=Object(a.useState)(new Date),o=Object(i.a)(s,2),b=o[0],m=o[1],h=new Date;h.setDate(h.getDate()+1);var p=Object(a.useState)(h),O=Object(i.a)(p,2),g=O[0],v=O[1],_=Object(a.useState)(""),T=Object(i.a)(_,2),I=T[0],w=T[1],D=Object(a.useState)(""),E=Object(i.a)(D,2),A=E[0],P=E[1],W=Object(a.useState)(1),G=Object(i.a)(W,2),X=G[0],L=G[1],J=Object(a.useState)(!1),K=Object(i.a)(J,2),$=K[0],q=K[1],Q=Object(a.useState)(!1),Z=Object(i.a)(Q,2),ee=Z[0],te=Z[1],ne=Object(a.useState)(t.state.response),ae=Object(i.a)(ne,2),re=ae[0],se=ae[1],ce=Object(a.useState)(t.state.response.length),ie=Object(i.a)(ce,2),oe=ie[0],le=ie[1],de=Object(a.useState)(!1),ue=Object(i.a)(de,2),je=ue[0],be=ue[1],me=Object(a.useState)(t.state.response[0]),he=Object(i.a)(me,2),pe=he[0],xe=he[1],fe=Object(a.useState)(!1),Oe=Object(i.a)(fe,2),ge=Oe[0],ve=Oe[1],ye=Object(a.useState)(!1),ke=Object(i.a)(ye,2),Ne=ke[0],Ce=ke[1],Se=Object(a.useState)(""),_e=Object(i.a)(Se,2),Te=_e[0],Ie=_e[1],we=Object(a.useState)("success"),De=Object(i.a)(we,2),Ee=De[0],Be=De[1],Re=[h,h,-1];function Ae(){return(Ae=Object(f.a)(x.a.mark((function e(n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve(!0),e.prev=1,e.next=4,fetch("http://localhost:1234/customers/"+t.state.customerSIN+"/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type_id:n,check_in:I,check_out:A})});case 4:if(201!==e.sent.status){e.next=12;break}return e.next=8,Ge();case 8:Pe("Successfully booked room","success"),be(!1),e.next=13;break;case 12:Pe("Error: Unable to book room","error");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Error:",e.t0),Pe("Error: Unable to book room","error");case 19:ve(!1);case 20:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}function Pe(e,t){Ie(e),Be(t),Ce(!0)}function We(){Ce(!1)}function Ge(){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(f.a)(x.a.mark((function e(){var n,a,r,s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Re[0]===b&&Re[1]===g&&Re[2]===X){e.next=27;break}return te(!0),e.prev=2,n="http://localhost:1234/hotels/"+t.state.hotelID+"/rooms/availability",n+="?check-in="+Me(b)+"&check-out="+Me(g)+"&people="+X,e.next=7,fetch(n);case 7:if(200===(a=e.sent).status){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,a.json();case 12:r=e.sent,s=JSON.parse(JSON.stringify(re)),c=s.length,s.forEach((function(e){var t=Le(e.type_id,r);e.enabled=!0,e.tooltip="",e.rooms_available=e.total_number_rooms-t.occupancy,-1===t.type_id&&(e.enabled=!1,e.tooltip="Room capacity is too small",c--),e.rooms_available<=0&&(e.enabled=!1,e.tooltip="Room is booked up over these dates",c--)})),s.sort((function(e,t){return e.enabled&&!t.enabled?-1:!e.enabled&&t.enabled?1:e.type_id>t.type_id?-1:1})),se(s),le(c),w(Me(b)),P(Me(g)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),console.error("Error:",e.t0);case 26:te(!1);case 27:$||q(!0);case 28:case"end":return e.stop()}}),e,null,[[2,23]])})))).apply(this,arguments)}function Le(e,t){for(var n=0;n<t.length;n++)if(t[n].type_id===e)return t[n];return{type_id:-1,occupancy:-1}}function Me(e){var t=e.getFullYear().toString(),n=""+(e.getMonth()+1),a=""+e.getDate();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),t+"-"+n+"-"+a}return t.state.response.forEach((function(e){e.enabled=!0,e.tooltip=""})),Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(V,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:t.state.brandName}),Object(j.jsx)(l.a,{className:e.centreTitleNoSpace,children:t.state.address}),Object(j.jsxs)(y.a,{className:e.gridParent,children:[Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(l.a,{children:"Enter booking info to select a room:"})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(M.a,{utils:F.a,children:Object(j.jsx)(z.a,{margin:"normal",id:"check-in-dialog",label:"Check in date",format:"yyyy-MM-dd",minDate:new Date,value:b,onChange:function(e){return function(e){if(null!==e&&null!==g){if(e.getTime()>=g.getTime()){var t=new Date;t.setMonth(e.getMonth()),t.setDate(e.getDate()+1),v(t)}q(!1),m(e)}}(e)},KeyboardButtonProps:{"aria-label":"change date"}})})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(M.a,{utils:F.a,children:Object(j.jsx)(z.a,{margin:"normal",id:"check-out-dialog",label:"Check out date",format:"yyyy-MM-dd",minDate:h,value:g,onChange:function(e){return function(e){if(null!==e&&null!==b){if(e.getTime()<=b.getTime()){var t=new Date;t.setMonth(e.getMonth()),t.setDate(e.getDate()-1),m(t)}q(!1),v(e)}}(e)},KeyboardButtonProps:{"aria-label":"change date"}})})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(d.a,{id:"capacity-number",label:"# of people",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:X,onChange:function(e){var t;(t=parseInt(e.target.value))>0&&(L(t),q(!1))}})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(u.a,{variant:"contained",onClick:Ge,disabled:ee,children:"Check Availability"})})]}),Object(j.jsxs)(l.a,{className:e.smallerTitle,children:[oe," Rooms Found"]}),Object(j.jsx)("div",{className:e.outsideGrid,children:Object(j.jsxs)(y.a,{cols:1,cellHeight:190,className:e.grid,children:[Object(j.jsx)("div",{style:{height:"1em"}}),re.map((function(t){return Object(j.jsx)(k.a,{cols:1,children:Object(j.jsx)(U,{title:t.tooltip,"aria-label":"add",placement:"top",children:Object(j.jsx)(N.a,{elevation:3,className:e.brandPaper,style:t.enabled?{}:{backgroundColor:"grey"},children:Object(j.jsx)("div",{style:t.enabled?{opacity:"1"}:{opacity:"0.40"},children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:e.hotelGrid,children:[Object(j.jsx)(l.a,{className:e.hotelTitle,children:t.title}),Object(j.jsxs)(l.a,{children:["Amenities: ",0===t.amenities.length?"None":t.amenities.join(", ")]}),Object(j.jsxs)(l.a,{children:["Max capacity: ",t.room_capacity," adults"]}),Object(j.jsxs)(l.a,{children:["View: ",t.view]}),Object(j.jsxs)(l.a,{children:["Extendable: ",t.is_extendable?"Yes":"No"]})]}),Object(j.jsx)(S.a,{orientation:"vertical",flexItem:!0,className:e.divider}),Object(j.jsx)(C.a,{container:!0,item:!0,xs:3,alignItems:"center",children:Object(j.jsxs)(C.a,{container:!0,className:e.priceDiv,children:[Object(j.jsxs)(l.a,{className:e.hotelTitle,children:["$",t.price,"/night"]}),Object(j.jsx)(l.a,{children:(n=t.rooms_available,a=t.total_number_rooms,n+"/"+a+" rooms available")}),Object(j.jsx)("br",{}),Object(j.jsx)(U,{title:!$&&t.enabled?"Check availability to book a room":"","aria-label":"add",placement:"top",children:Object(j.jsx)("div",{children:Object(j.jsx)(u.a,{variant:"contained",onClick:function(){return function(e){xe(e),be(!0)}(t)},disabled:!t.enabled||!$,children:"Book Room"})})})]})})]})})},t.type_id)})},t.type_id);var n,a}))]})}),Object(j.jsx)(Y,{dialogOpen:je,setDialogOpen:be,roomToBook:pe,classes:e,location:t,checkInDateToBook:I,bookRoom:function(e){return Ae.apply(this,arguments)},checkOutDateToBook:A,disableBookRoomButton:ge}),Object(j.jsx)(B.a,{open:Ne,autoHideDuration:6e3,onClose:We,children:Object(j.jsx)(R.a,{onClose:We,severity:Ee,children:Te})})]})}})]})})}),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.96e303c4.chunk.js.map