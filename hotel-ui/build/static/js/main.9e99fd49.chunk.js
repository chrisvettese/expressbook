(this["webpackJsonphotel-ui"]=this["webpackJsonphotel-ui"]||[]).push([[0],{193:function(e,t,a){"use strict";a.r(t),a.d(t,"TitleBarCustomer",(function(){return xe})),a.d(t,"TitleBarEmployee",(function(){return fe}));var n=a(0),r=a(17),s=a(26),c=a(21),i=a(5),o=a(220),l=a(90),u=a(236),d=a(225),j=a(1),m=Object(o.a)((function(){return{sinCentre:{paddingTop:"3em",display:"flex",alignItems:"center",justifyContent:"center"},buttonCentre:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}}}));var b=Object(o.a)((function(){return{sinCentre:{paddingTop:"3em",display:"flex",alignItems:"center",justifyContent:"center"},buttonCentre:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}}}));var p=a(235),h=a(10),O=a.n(h),x=a(16),f=Object(o.a)((function(){return{centre:{paddingTop:"5em",display:"flex",alignItems:"center",justifyContent:"center"},textField:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"},buttonCentre:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center"}}}));var g=a(132),y=Object(o.a)((function(){return{centre:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.4em"},inPaper:{display:"flex"},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center"},buttonCentre:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"2em"},buttonSpacing:{marginLeft:"1.5em",marginRight:"1.5em"},paperContainer:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{display:"inline-block",padding:"1em",alignItems:"center",justifyContent:"center"}}}));var v=a(13),N=a(226),S=a(227),C=a(228),k=a(229),T=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1em"},brandPaper:{marginTop:"2em",marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center"},hotelTitle:{fontWeight:"bold",fontSize:"1.5em",width:"100%"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"38em",width:"85%",marginTop:"10em",marginLeft:"10em"},divider:{marginLeft:"1em",marginRight:"1em"},brandGrid:{width:"80%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}}}));var I=a(246),_=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1em",width:"100%"},brandPaper:{marginTop:"2em",marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center"},hotelTitle:{fontWeight:"bold",fontSize:"1.5em"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"38em",width:"85%",marginTop:"10em",marginLeft:"10em"},divider:{marginLeft:"1em",marginRight:"1em"},hotelGrid:{width:"80%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}}}));var w=a(243),D=a(230),E=a(239),A=a(241),P=a(240),B=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},brandPaper:{marginTop:"2em",marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center"},hotelTitle:{fontWeight:"bold",fontSize:"1.5em"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"38em",width:"85%",marginTop:"10em",marginLeft:"10em"},divider:{marginLeft:"1em",marginRight:"1em"},hotelGrid:{width:"70%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},radioGroup:{width:"100%",alignItems:"center",justifyContent:"center",marginBottom:"1em"}}})),R=function(e){var t=e.classes,a=e.reservations,n=e.editButtonToDisable,r=e.radioState,s=e.setEditButtonToDisable,c=e.setAlertMessage,i=e.setAlertStatus,o=e.setAlertOpen,u=e.customerSIN,d=e.setReservations;return Object(j.jsx)(N.a,{cols:1,cellHeight:230,className:t.grid,children:a.filter((function(e){return!(1===r&&"Renting"!==e.status||2===r&&"Booked"!==e.status||3===r&&"Archived"!==e.status&&"Cancelled"!==e.status)})).map((function(e){var r=new Date(e.check_in_day.replace("-","/")),m=new Date(e.check_out_day.replace("-","/")),b=(Math.round(Math.abs(+r-+m)/24/60/60/1e3)*parseFloat(e.price)).toFixed(2);return 0===e.amenities.length&&e.amenities.push("None"),Object(j.jsx)(S.a,{cols:1,children:Object(j.jsx)(g.a,{elevation:3,className:t.brandPaper,children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:t.hotelGrid,children:[Object(j.jsxs)(l.a,{className:t.hotelTitle,children:["Room: ",e.title," | ",e.check_in_day," to ",e.check_out_day]}),Object(j.jsx)(l.a,{children:void 0===e.job_title?"":"Employee: "+e.employee_name+", "+e.job_title}),Object(j.jsx)(l.a,{children:e.physical_address}),Object(j.jsxs)(l.a,{children:["Booking status: ",e.status]}),Object(j.jsxs)(l.a,{children:["Amenities: ",e.amenities.join(", ")]}),Object(j.jsxs)(l.a,{children:["View: ",e.view]}),Object(j.jsxs)(l.a,{children:["Extendable: ",e.is_extendable?"Yes":"No"]})]}),Object(j.jsx)(k.a,{orientation:"vertical",flexItem:!0,className:t.divider}),Object(j.jsx)(C.a,{item:!0,xs:3,children:Object(j.jsxs)(C.a,{className:t.priceDiv,children:[Object(j.jsxs)(l.a,{children:["Booked on ",e.date_of_registration]}),Object(j.jsx)(l.a,{className:t.hotelTitle,children:"Total price:"}),Object(j.jsxs)(l.a,{className:t.hotelTitle,children:["$",b]}),Object(j.jsx)("br",{}),Object(j.jsx)(M,{reservation:e,reservations:a,setEditButtonToDisable:s,editButtonToDisable:n,setAlertMessage:c,setAlertStatus:i,setAlertOpen:o,customerSIN:u,setReservations:d})]})})]})},e.booking_id)},e.booking_id)}))})},M=function(e){var t=e.reservation,a=e.reservations,n=e.editButtonToDisable,r=e.setEditButtonToDisable,s=e.setAlertMessage,c=e.setAlertStatus,i=e.setAlertOpen,o=e.customerSIN,l=e.setReservations;return"Renting"===t.status?Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return F("Archived",r,a,t,s,c,i,o,l)},disabled:n===t.booking_id,children:"Check Out"}):"Booked"===t.status?Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return F("Cancelled",r,a,t,s,c,i,o,l)},disabled:n===t.booking_id,children:"Cancel"}):Object(j.jsx)(j.Fragment,{})};function F(e,t,a,n,r,s,c,i,o){return W.apply(this,arguments)}function W(){return(W=Object(x.a)(O.a.mark((function e(t,a,n,r,s,c,i,o,l){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(r.booking_id),e.prev=1,e.next=4,fetch("http://localhost:1234/customers/"+o+"/reservations/"+r.booking_id,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})});case 4:204===e.sent.status?"Archived"===t?(z(Object(v.a)(n),r.booking_id,"Archived",l),G("Successfully checked out of hotel","success",s,c,i)):(z(Object(v.a)(n),r.booking_id,"Cancelled",l),G("Successfully cancelled room booking","success",s,c,i)):G("Error: Unable to modify reservation","error",s,c,i),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0),G("Error: Unable to modify reservation","error",s,c,i);case 12:a(-1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function z(e,t,a,n){for(var r=0;r<e.length;r++)if(e[r].booking_id===t)return e[r].status=a,void n(e)}function G(e,t,a,n,r){a(e),n(t),r(!0)}function X(){var e=B(),t=Object(c.g)();t.state.response.sort((function(e,t){return e.check_in_day>t.check_in_day?1:-1}));var a=Object(n.useState)(0),r=Object(i.a)(a,2),s=r[0],o=r[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),m=d[0],b=d[1],p=Object(n.useState)(""),h=Object(i.a)(p,2),O=h[0],x=h[1],f=Object(n.useState)("success"),g=Object(i.a)(f,2),y=g[0],N=g[1],S=Object(n.useState)(-1),C=Object(i.a)(S,2),k=C[0],T=C[1],I=Object(n.useState)(Object(v.a)(t.state.response)),_=Object(i.a)(I,2),M=_[0],F=_[1],W=t.state.isCustomer?"My Reservations - "+t.state.customerName:"Customer Reservations - "+t.state.customerName;function z(){b(!1)}return Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(xe,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:W}),Object(j.jsxs)(w.a,{className:e.radioGroup,value:s,onChange:function(e){return function(e){var t=parseInt(e.target.value);o(t)}(e)},row:!0,children:[Object(j.jsx)(l.a,{children:"Filter by:\xa0\xa0\xa0"}),Object(j.jsx)(D.a,{value:0,control:Object(j.jsx)(E.a,{}),label:"All Reservations"}),Object(j.jsx)(D.a,{value:1,control:Object(j.jsx)(E.a,{}),label:"Ongoing"}),Object(j.jsx)(D.a,{value:2,control:Object(j.jsx)(E.a,{}),label:"Upcoming"}),Object(j.jsx)(D.a,{value:3,control:Object(j.jsx)(E.a,{}),label:"Cancelled/Archived"})]}),Object(j.jsx)(R,{classes:e,reservations:M,editButtonToDisable:k,radioState:s,setEditButtonToDisable:T,setAlertMessage:x,setAlertStatus:N,setAlertOpen:b,customerSIN:t.state.customerSIN,setReservations:F}),Object(j.jsx)(A.a,{open:m,autoHideDuration:6e3,onClose:z,children:Object(j.jsx)(P.a,{onClose:z,severity:y,children:O})})]})}var L=a(110),H=a(244),U=a(242),J=a(232),$=a(233),Y=a(24),V=a(237),K=a(81),q=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"1em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},centreTitleNoSpace:{fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},smallerTitle:{fontSize:"1.7em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",marginBottom:"0.5em"},brandPaper:{marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center",marginTop:"1em"},hotelTitle:{fontWeight:"bold",fontSize:"1.5em"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"50em",width:"85%",marginTop:"10em"},outsideGrid:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",marginBottom:"2em"},divider:{marginLeft:"1em",marginRight:"1em"},hotelGrid:{width:"70%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},dateGrid:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},gridParent:{display:"flex",justifyContent:"center",width:"100%"},dialogDiv:{marginLeft:"0.5em",marginRight:"0.5em"},dialogHeader:{fontWeight:"bold"},dialogTitle:{fontSize:"1.8em",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},dialogAddress:{marginLeft:"0.5em",marginRight:"0.5em",fontStyle:"italic",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}}})),Q=Object(o.a)((function(e){return{arrow:{color:e.palette.common.black},tooltip:{backgroundColor:e.palette.common.black}}}));function Z(e){var t=Q();return Object(j.jsx)(H.a,Object(L.a)({arrow:!0,classes:t},e))}function ee(e){var t=e.location,a=e.classes;return void 0!==t.state.employeeName?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k.a,{}),Object(j.jsx)(l.a,{align:"center",className:a.dialogHeader,children:"Employee Info"}),Object(j.jsx)(k.a,{}),Object(j.jsxs)("div",{className:a.dialogDiv,children:[Object(j.jsx)(l.a,{children:t.state.employeeName}),Object(j.jsx)(l.a,{children:t.state.jobTitle})]}),Object(j.jsx)("br",{})]}):Object(j.jsx)(j.Fragment,{})}var te=function(e){var t=e.dialogOpen,a=e.setDialogOpen,n=e.roomToBook,r=e.classes,s=e.location,c=e.checkInDateToBook,i=e.checkOutDateToBook,o=e.disableBookRoomButton,u=e.bookRoom;return Object(j.jsxs)(U.a,{onClose:function(){return a(!1)},"aria-labelledby":"simple-dialog-title",open:t,children:[Object(j.jsx)(J.a,{id:"dialog-title",className:r.dialogTitle,children:Object(j.jsx)(l.a,{className:r.dialogTitle,children:"Confirm Room Booking"})}),Object(j.jsx)("div",{className:r.dialogAddress,children:Object(j.jsx)(l.a,{align:"center",children:s.state.address})}),Object(j.jsx)("br",{}),Object(j.jsx)(ee,{location:s,classes:r}),Object(j.jsx)(k.a,{}),Object(j.jsx)(l.a,{align:"center",className:r.dialogHeader,children:"Customer Info"}),Object(j.jsx)(k.a,{}),Object(j.jsxs)("div",{className:r.dialogDiv,children:[Object(j.jsx)(l.a,{children:s.state.customerName}),Object(j.jsx)(l.a,{children:s.state.customerAddress}),Object(j.jsx)(l.a,{children:s.state.customerEmail}),Object(j.jsx)(l.a,{children:s.state.customerPhone})]}),Object(j.jsx)("br",{}),Object(j.jsx)(k.a,{}),Object(j.jsx)(l.a,{align:"center",className:r.dialogHeader,children:"Room Details"}),Object(j.jsx)(k.a,{}),Object(j.jsxs)("div",{className:r.dialogDiv,children:[Object(j.jsxs)(l.a,{children:["Room type: ",n.title]}),Object(j.jsxs)(l.a,{children:[c," to ",i]}),Object(j.jsxs)(l.a,{children:["Amenities: ",n.amenities.join(", ")]}),Object(j.jsxs)(l.a,{children:["View: ",n.view]}),Object(j.jsxs)(l.a,{children:["Extendable: ",n.is_extendable?"Yes":"No"]})]}),Object(j.jsx)("br",{}),Object(j.jsxs)($.a,{children:[Object(j.jsx)(d.a,{disabled:o,onClick:function(){return u(n.type_id)},variant:"contained",color:"primary",children:"Book Room"}),Object(j.jsx)(d.a,{onClick:function(){return a(!1)},variant:"contained",color:"secondary",children:"Cancel"})]})]})};function ae(){for(var e=q(),t=Object(c.g)(),a=[],r=0;r<t.state.response.length;r++)a.push(!0);var s=Object(n.useState)(new Date),o=Object(i.a)(s,2),m=o[0],b=o[1],p=new Date;p.setDate(p.getDate()+1);var h=Object(n.useState)(p),f=Object(i.a)(h,2),y=f[0],v=f[1],T=Object(n.useState)(""),I=Object(i.a)(T,2),_=I[0],w=I[1],D=Object(n.useState)(""),E=Object(i.a)(D,2),B=E[0],R=E[1],M=Object(n.useState)(1),F=Object(i.a)(M,2),W=F[0],z=F[1],G=Object(n.useState)(!1),X=Object(i.a)(G,2),L=X[0],H=X[1],U=Object(n.useState)(!1),J=Object(i.a)(U,2),$=J[0],Q=J[1],ee=Object(n.useState)(t.state.response),ae=Object(i.a)(ee,2),ne=ae[0],re=ae[1],se=Object(n.useState)(t.state.response.length),ce=Object(i.a)(se,2),ie=ce[0],oe=ce[1],le=Object(n.useState)(!1),ue=Object(i.a)(le,2),de=ue[0],je=ue[1],me=Object(n.useState)(t.state.response[0]),be=Object(i.a)(me,2),pe=be[0],he=be[1],Oe=Object(n.useState)(!1),fe=Object(i.a)(Oe,2),ge=fe[0],ye=fe[1],ve=Object(n.useState)(!1),Ne=Object(i.a)(ve,2),Se=Ne[0],Ce=Ne[1],ke=Object(n.useState)(""),Te=Object(i.a)(ke,2),Ie=Te[0],_e=Te[1],we=Object(n.useState)("success"),De=Object(i.a)(we,2),Ee=De[0],Ae=De[1],Pe=[p,p,-1];function Be(){return(Be=Object(x.a)(O.a.mark((function e(a){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ye(!0),n="",n=void 0===t.state.employeeSIN?JSON.stringify({type_id:a,check_in:_,check_out:B}):JSON.stringify({type_id:a,check_in:_,check_out:B,employee_sin:t.state.employeeSIN}),e.prev=3,e.next=6,fetch("http://localhost:1234/customers/"+t.state.customerSIN+"/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:n});case 6:if(201!==e.sent.status){e.next=14;break}return e.next=10,Fe();case 10:Re("Successfully booked room","success"),je(!1),e.next=15;break;case 14:Re("Error: Unable to book room","error");case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),console.error("Error:",e.t0),Re("Error: Unable to book room","error");case 21:ye(!1);case 22:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}function Re(e,t){_e(e),Ae(t),Ce(!0)}function Me(){Ce(!1)}function Fe(){return We.apply(this,arguments)}function We(){return(We=Object(x.a)(O.a.mark((function e(){var a,n,r,s,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pe[0]===m&&Pe[1]===y&&Pe[2]===W){e.next=27;break}return Q(!0),e.prev=2,a="http://localhost:1234/hotels/"+t.state.hotelID+"/rooms/availability",a+="?check-in="+Ge(m)+"&check-out="+Ge(y)+"&people="+W,e.next=7,fetch(a);case 7:if(200===(n=e.sent).status){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,n.json();case 12:r=e.sent,s=JSON.parse(JSON.stringify(ne)),c=s.length,s.forEach((function(e){var t=ze(e.type_id,r);e.enabled=!0,e.tooltip="",e.rooms_available=e.total_number_rooms-t.occupancy,-1===t.type_id&&(e.enabled=!1,e.tooltip="Room capacity is too small",c--),e.rooms_available<=0&&(e.enabled=!1,e.tooltip="Room is booked up over these dates",c--)})),s.sort((function(e,t){return e.enabled&&!t.enabled?-1:!e.enabled&&t.enabled?1:e.type_id>t.type_id?-1:1})),re(s),oe(c),w(Ge(m)),R(Ge(y)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(2),console.error("Error:",e.t0);case 26:Q(!1);case 27:L||H(!0);case 28:case"end":return e.stop()}}),e,null,[[2,23]])})))).apply(this,arguments)}function ze(e,t){for(var a=0;a<t.length;a++)if(t[a].type_id===e)return t[a];return{type_id:-1,occupancy:-1}}function Ge(e){var t=e.getFullYear().toString(),a=""+(e.getMonth()+1),n=""+e.getDate();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),t+"-"+a+"-"+n}return t.state.response.forEach((function(e){e.enabled=!0,e.tooltip=""})),Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(xe,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:t.state.brandName}),Object(j.jsx)(l.a,{className:e.centreTitleNoSpace,children:t.state.address}),Object(j.jsxs)(N.a,{className:e.gridParent,children:[Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(l.a,{children:"Enter booking info to select a room:"})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(Y.a,{utils:K.a,children:Object(j.jsx)(V.a,{margin:"normal",id:"check-in-dialog",label:"Check in date",format:"yyyy-MM-dd",minDate:new Date,value:m,onChange:function(e){return function(e){if(null!==e&&null!==y){if(e.getTime()>=y.getTime()){var t=new Date;t.setMonth(e.getMonth()),t.setDate(e.getDate()+1),v(t)}H(!1),b(e)}}(e)},KeyboardButtonProps:{"aria-label":"change date"}})})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(Y.a,{utils:K.a,children:Object(j.jsx)(V.a,{margin:"normal",id:"check-out-dialog",label:"Check out date",format:"yyyy-MM-dd",minDate:p,value:y,onChange:function(e){return function(e){if(null!==e&&null!==m){if(e.getTime()<=m.getTime()){var t=new Date;t.setMonth(e.getMonth()),t.setDate(e.getDate()-1),b(t)}H(!1),v(e)}}(e)},KeyboardButtonProps:{"aria-label":"change date"}})})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(u.a,{id:"capacity-number",label:"# of people",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:W,onChange:function(e){var t;(t=parseInt(e.target.value))>0&&(z(t),H(!1))}})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(d.a,{variant:"contained",onClick:Fe,disabled:$,children:"Check Availability"})})]}),Object(j.jsxs)(l.a,{className:e.smallerTitle,children:[ie," Rooms Found"]}),Object(j.jsx)("div",{className:e.outsideGrid,children:Object(j.jsxs)(N.a,{cols:1,cellHeight:190,className:e.grid,children:[Object(j.jsx)("div",{style:{height:"1em"}}),ne.map((function(t){return Object(j.jsx)(S.a,{cols:1,children:Object(j.jsx)(Z,{title:t.tooltip,"aria-label":"add",placement:"top",children:Object(j.jsx)(g.a,{elevation:3,className:e.brandPaper,style:t.enabled?{}:{backgroundColor:"grey"},children:Object(j.jsx)("div",{style:t.enabled?{opacity:"1"}:{opacity:"0.40"},children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:e.hotelGrid,children:[Object(j.jsx)(l.a,{className:e.hotelTitle,children:t.title}),Object(j.jsxs)(l.a,{children:["Amenities: ",0===t.amenities.length?"None":t.amenities.join(", ")]}),Object(j.jsxs)(l.a,{children:["Max capacity: ",t.room_capacity," adults"]}),Object(j.jsxs)(l.a,{children:["View: ",t.view]}),Object(j.jsxs)(l.a,{children:["Extendable: ",t.is_extendable?"Yes":"No"]})]}),Object(j.jsx)(k.a,{orientation:"vertical",flexItem:!0,className:e.divider}),Object(j.jsx)(C.a,{container:!0,item:!0,xs:3,alignItems:"center",children:Object(j.jsxs)(C.a,{container:!0,className:e.priceDiv,children:[Object(j.jsxs)(l.a,{className:e.hotelTitle,children:["$",t.price,"/night"]}),Object(j.jsx)(l.a,{children:(a=t.rooms_available,n=t.total_number_rooms,a+"/"+n+" rooms available")}),Object(j.jsx)("br",{}),Object(j.jsx)(Z,{title:!L&&t.enabled?"Check availability to book a room":"","aria-label":"add",placement:"top",children:Object(j.jsx)("div",{children:Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return function(e){he(e),je(!0)}(t)},disabled:!t.enabled||!L,children:"Book Room"})})})]})})]})})},t.type_id)})},t.type_id);var a,n}))]})}),Object(j.jsx)(te,{dialogOpen:de,setDialogOpen:je,roomToBook:pe,classes:e,location:t,checkInDateToBook:_,bookRoom:function(e){return Be.apply(this,arguments)},checkOutDateToBook:B,disableBookRoomButton:ge}),Object(j.jsx)(A.a,{open:Se,autoHideDuration:6e3,onClose:Me,children:Object(j.jsx)(P.a,{onClose:Me,severity:Ee,children:Ie})})]})}var ne=a(238),re=Object(o.a)((function(){return{centre:{paddingTop:"2em",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.4em"},inPaper:{display:"flex"},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center"},buttonCentre:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"2em",flexGrow:1},buttonSpacing:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1em",marginTop:"1em",marginLeft:"1em",marginRight:"1em"},gridSpacing:{alignItems:"center",justifyContent:"center"},paperContainer:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{display:"inline-block",padding:"1em",alignItems:"center",justifyContent:"center"},topGrid:{maxWidth:"45em"}}}));var se=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},centreSubTitle:{paddingTop:"0.5em",fontSize:"1.4em",display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},brandPaper:{marginTop:"2em",marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center"},hotelTitle:{fontWeight:"bold",fontSize:"1.5em"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"38em",width:"85%",marginTop:"10em",marginLeft:"10em"},divider:{marginLeft:"1em",marginRight:"1em"},hotelGrid:{width:"70%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},centreDiv:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1em",marginTop:"1em"}}})),ce=function(e){var t=e.classes,a=e.reservations,n=e.editButtonToDisable,r=e.setEditButtonToDisable,s=e.setAlertMessage,c=e.setAlertStatus,i=e.setAlertOpen,o=e.setReservations,u=e.isCheckIn,m=e.searchSIN,b=e.employeeSIN,p=a.filter((function(e){return e.customer_sin.includes(m)}));return 0===p.length?Object(j.jsx)(N.a,{cols:1,cellHeight:220,className:t.grid,children:Object(j.jsx)(S.a,{cols:1,children:Object(j.jsx)(l.a,{className:t.centreSubTitle,children:"No reservations found!"})})}):Object(j.jsx)(N.a,{cols:1,cellHeight:220,className:t.grid,children:p.map((function(e,m){var p=new Date(e.check_in_day.replace("-","/")),h=new Date(e.check_out_day.replace("-","/")),O=(Math.round(Math.abs(+p-+h)/24/60/60/1e3)*parseFloat(e.price)).toFixed(2);return 0===e.amenities.length&&e.amenities.push("None"),Object(j.jsx)(S.a,{cols:1,children:Object(j.jsx)(g.a,{elevation:3,className:t.brandPaper,children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:t.hotelGrid,children:[Object(j.jsxs)(l.a,{className:t.hotelTitle,children:["Room: ",e.title," | ",e.check_in_day," to ",e.check_out_day]}),Object(j.jsxs)(l.a,{children:["Customer name: ",e.customer_name]}),Object(j.jsxs)(l.a,{children:["Customer SIN: ",e.customer_sin]}),Object(j.jsxs)(l.a,{children:["Amenities: ",e.amenities.join(", ")]}),Object(j.jsxs)(l.a,{children:["View: ",e.view]}),Object(j.jsxs)(l.a,{children:["Extendable: ",e.is_extendable?"Yes":"No"]})]}),Object(j.jsx)(k.a,{orientation:"vertical",flexItem:!0,className:t.divider}),Object(j.jsx)(C.a,{item:!0,xs:3,children:Object(j.jsxs)(C.a,{className:t.priceDiv,children:[Object(j.jsxs)(l.a,{children:["Booked on ",e.date_of_registration]}),Object(j.jsx)(l.a,{className:t.hotelTitle,children:"Total price:"}),Object(j.jsxs)(l.a,{className:t.hotelTitle,children:["$",O]}),Object(j.jsx)("br",{}),Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return function(e,t,a,n,r,s,c,i,o,l){return ie.apply(this,arguments)}(u?"Renting":"Archived",r,a,e,s,c,i,o,m,b)},disabled:n===e.booking_id,children:u?"Check In":"Check Out"})]})})]})},e.booking_id)},e.booking_id)}))})};function ie(){return(ie=Object(x.a)(O.a.mark((function e(t,a,n,r,s,c,i,o,l,u){var d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(r.booking_id),e.prev=1,e.next=4,fetch("http://localhost:1234/customers/"+r.customer_sin+"/reservations/"+r.booking_id,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t,employee_sin:u})});case 4:204===e.sent.status?(oe("Renting"===t?"Successfully checked in customer":"Successfully checked out customer","success",s,c,i),(d=Object(v.a)(n)).splice(l,1),o(d)):oe("Error: Unable to modify reservation","error",s,c,i),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0),oe("Error: Unable to modify reservation","error",s,c,i);case 12:a(-1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function oe(e,t,a,n,r){a(e),n(t),r(!0)}function le(){var e=se(),t=Object(c.g)();t.state.response.sort((function(e,t){return e.check_in_day>t.check_in_day?1:-1}));var a=Object(n.useState)(!1),r=Object(i.a)(a,2),s=r[0],o=r[1],d=Object(n.useState)(""),m=Object(i.a)(d,2),b=m[0],p=m[1],h=Object(n.useState)("success"),O=Object(i.a)(h,2),x=O[0],f=O[1],g=Object(n.useState)(-1),y=Object(i.a)(g,2),N=y[0],S=y[1],C=Object(n.useState)(Object(v.a)(t.state.response)),k=Object(i.a)(C,2),T=k[0],I=k[1],_=Object(n.useState)(""),w=Object(i.a)(_,2),D=w[0],E=w[1],B=(new Date).toDateString(),R=t.state.checkIn?"For "+B:"Customers currently renting rooms";function M(){o(!1)}return Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(xe,{}),Object(j.jsxs)(l.a,{className:e.centreTitle,children:["Customer ",t.state.checkIn?"Check In":"Check Out"]}),Object(j.jsx)(l.a,{className:e.centreSubTitle,children:R}),Object(j.jsx)("div",{className:e.centreDiv,children:Object(j.jsx)(u.a,{label:"Search by SIN",variant:"outlined",value:D,onChange:function(e){return E(e.currentTarget.value)}})}),Object(j.jsx)(ce,{classes:e,reservations:T,editButtonToDisable:N,employeeSIN:t.state.employeeSIN,setEditButtonToDisable:S,setAlertMessage:p,setAlertStatus:f,setAlertOpen:o,searchSIN:D,setReservations:I,isCheckIn:t.state.checkIn}),Object(j.jsx)(A.a,{open:s,autoHideDuration:6e3,onClose:M,children:Object(j.jsx)(P.a,{onClose:M,severity:x,children:b})})]})}var ue=Object(o.a)((function(){return{centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center"},dateGrid:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},gridParent:{display:"flex",justifyContent:"center",width:"100%"},subTitle:{fontSize:"1.4em"},paperContainer:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{display:"inline-block",padding:"1em",alignItems:"center",justifyContent:"center"},inPaper:{display:"flex"},dialogTitle:{fontSize:"1.8em",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},dialogAddress:{marginLeft:"0.5em",marginRight:"0.5em",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}}})),de=function(e){var t=e.dialogOpen,a=e.setDialogOpen,r=e.classes,s=e.customerSIN,c=e.setAlertMessage,o=e.setAlertStatus,m=e.setAlertOpen,b=e.setCustomerData,p=e.customerName,h=e.setCustomerName,O=e.customerAddress,x=e.setCustomerAddress,f=e.customerPhone,g=e.setCustomerPhone,y=e.customerEmail,v=e.setCustomerEmail,N=Object(n.useState)(!1),S=Object(i.a)(N,2),C=S[0],k=S[1],T=Object(n.useState)(!1),I=Object(i.a)(T,2),_=I[0],w=I[1],D=Object(n.useState)(!1),E=Object(i.a)(D,2),A=E[0],P=E[1],B=Object(n.useState)(!1),R=Object(i.a)(B,2),M=R[0],F=R[1],W=Object(n.useState)(!1),z=Object(i.a)(W,2),G=z[0],X=z[1];return Object(j.jsxs)(U.a,{onClose:function(){return a(!1)},"aria-labelledby":"simple-dialog-title",open:t,children:[Object(j.jsx)(J.a,{id:"dialog-title",className:r.dialogTitle,children:Object(j.jsx)(l.a,{className:r.dialogTitle,children:"Create Customer Profile"})}),Object(j.jsxs)("div",{className:r.dialogAddress,children:[Object(j.jsxs)(l.a,{align:"center",children:["Customer SIN: ",s]}),Object(j.jsx)("br",{}),Object(j.jsx)(u.a,{label:"Customer Name",variant:"outlined",value:p,error:C,helperText:C?"Must provide name":"",onChange:function(e){return h(e.currentTarget.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)(u.a,{label:"Customer Address",variant:"outlined",value:O,error:_,helperText:_?"Must provide address":"",onChange:function(e){return x(e.currentTarget.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)(u.a,{label:"Customer Email",variant:"outlined",value:y,error:A,helperText:A?"Must provide valid email":"",onChange:function(e){return v(e.currentTarget.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)(u.a,{label:"Customer Phone Number",variant:"outlined",value:f,error:M,helperText:M?"Must provide valid phone number":"",onChange:function(e){return g(e.currentTarget.value)}}),Object(j.jsx)("br",{})]}),Object(j.jsxs)($.a,{children:[Object(j.jsx)(d.a,{disabled:G,onClick:function(){return function(e,t,a,n,r,s,c,i,o,l,u,d,j,m,b){return je.apply(this,arguments)}(s,p,O,y,f,X,k,w,P,F,c,o,m,b,a)},variant:"contained",color:"primary",children:"Create Profile"}),Object(j.jsx)(d.a,{onClick:function(){a(!1)},variant:"contained",color:"secondary",children:"Cancel"})]})]})};function je(){return(je=Object(x.a)(O.a.mark((function e(t,a,n,r,s,c,i,o,l,u,d,j,m,b,p){var h,x,f,g,y;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=0===a.length,x=0===n.length,(f=r.includes(" ")||r.indexOf("@")<1)||((g=r.indexOf(".",r.indexOf("@")))<3||g===r.length-1)&&(f=!0),y=!/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(s),i(h),o(x),l(f),u(y),!(h||x||f||y)){e.next=11;break}return e.abrupt("return");case 11:return c(!0),e.prev=12,e.next=15,fetch("http://localhost:1234/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_sin:t,customer_name:a,customer_address:n,customer_email:r,customer_phone:s})});case 15:201===e.sent.status?(b({customer_sin:t,customer_name:a,customer_address:n,customer_email:r,customer_phone:s}),me("Successfully created customer profile","success",d,j,m),p(!1)):me("Error: Unable to created customer profile","error",d,j,m),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(12),console.error("Error:",e.t0),me("Error: Unable to created customer profile","error",d,j,m);case 23:c(!1);case 24:case"end":return e.stop()}}),e,null,[[12,19]])})))).apply(this,arguments)}function me(e,t,a,n,r){a(e),n(t),r(!0)}var be=a(234),pe=Object(o.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:e.palette.background.paper},centreTitle:{paddingTop:"2em",fontWeight:"bold",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1em",width:"100%"},subTitle:{fontSize:"1.4em",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1em",width:"100%"},brandPaper:{marginTop:"2em",marginLeft:"6em",marginRight:"6em",padding:"1em",display:"flex",flexDirection:"column",justifyContent:"center"},empName:{fontWeight:"bold",fontSize:"1.5em",width:"100%"},grid:{boxShadow:"0 0 3pt 1pt gray",height:"38em",width:"85%",marginTop:"10em",marginLeft:"10em",paddingBottom:"1em"},divider:{marginLeft:"1em",marginRight:"1em"},brandGrid:{width:"80%"},priceDiv:{display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},dialogTitle:{fontSize:"1.8em",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"},dialogAddress:{marginLeft:"0.5em",marginRight:"0.5em",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center"}}})),he=function(e){var t=e.dialogOpen,a=e.setDialogOpen,r=e.classes,s=e.openAlert,c=e.hotelID,o=e.managerSIN,m=e.employees,b=e.setEmployees,p=/^[0-9]{3}-[0-9]{3}-[0-9]{3}$/,h=Object(n.useState)(!1),f=Object(i.a)(h,2),g=f[0],y=f[1],N=Object(n.useState)(!1),S=Object(i.a)(N,2),C=S[0],k=S[1],T=Object(n.useState)(!1),I=Object(i.a)(T,2),_=I[0],w=I[1],D=Object(n.useState)(!1),E=Object(i.a)(D,2),A=E[0],P=E[1],B=Object(n.useState)(!1),R=Object(i.a)(B,2),M=R[0],F=R[1],W=Object(n.useState)(""),z=Object(i.a)(W,2),G=z[0],X=z[1],L=Object(n.useState)(""),H=Object(i.a)(L,2),Y=H[0],V=H[1],K=Object(n.useState)(""),q=Object(i.a)(K,2),Q=q[0],Z=q[1],ee=Object(n.useState)(""),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(""),se=Object(i.a)(re,2),ce=se[0],ie=se[1],oe=Object(n.useState)(!1),le=Object(i.a)(oe,2),ue=le[0],de=le[1],je=Object(n.useState)(!1),me=Object(i.a)(je,2),pe=me[0],he=me[1],Oe=Object(n.useState)(!1),xe=Object(i.a)(Oe,2),fe=xe[0],ge=xe[1],ye=Object(n.useState)(""),ve=Object(i.a)(ye,2),Ne=ve[0],Se=ve[1],Ce=Object(n.useState)(""),ke=Object(i.a)(Ce,2),Te=ke[0],Ie=ke[1],_e=Object(n.useState)(""),we=Object(i.a)(_e,2),De=we[0],Ee=we[1],Ae=Object(n.useState)(""),Pe=Object(i.a)(Ae,2),Be=Pe[0],Re=Pe[1],Me=Object(n.useState)(""),Fe=Object(i.a)(Me,2),We=Fe[0],ze=Fe[1],Ge=Object(n.useState)(!1),Xe=Object(i.a)(Ge,2),Le=Xe[0],He=Xe[1];function Ue(){return(Ue=Object(x.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(de(!0),p.test(Ne)&&0!==Ne.length){e.next=7;break}return X("Must enter valid SIN"),y(!0),de(!1),ge(!1),e.abrupt("return");case 7:return e.prev=7,e.next=10,fetch("http://localhost:1234/employees/"+Ne);case 10:if(404!==(t=e.sent).status){e.next=26;break}ge(!0),y(!1),de(!1),ge(!0),he(!1),X(""),Ie(""),ze(""),Re(""),Ee(""),He(!0),s("Employee SIN validated","success"),e.next=34;break;case 26:if(200!==t.status){e.next=33;break}return e.next=29,t.json();case 29:"hired"===(a=e.sent).status?(X("Invalid SIN. Employee already exists!"),y(!0)):(He(!1),y(!1),de(!1),X(""),he(!1),Ee(a.employee_address),Ie(a.employee_name),ze(a.job_title),Re(a.salary),ge(!0),s("Existing profile found","success")),e.next=34;break;case 33:s("Unable to verify SIN","error");case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(7),console.log("Error:",e.t0),s("Unable to verify SIN","error");case 40:de(!1);case 41:case"end":return e.stop()}}),e,null,[[7,36]])})))).apply(this,arguments)}function Je(){return(Je=Object(x.a)(O.a.mark((function e(){var t,a,n,r,i,l,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(he(!0),t=Te.length>0&&Te.length<255,a=De.length>0&&De.length<255,n=!Number.isNaN(Be)&&parseFloat(Be)>0,r=We.length>0,k(!t),w(!a),P(!n),F(!r),t||V("Must enter valid name for employee"),a||Z("Must enter valid address for employee"),n||ne("Must enter valid salary for employee"),r||ie("Must enter valid job title for employee"),t&&a&&n&&r){e.next=16;break}return he(!1),e.abrupt("return");case 16:if(i=parseFloat(Be).toFixed(2),console.log(Le),!Le){e.next=32;break}return e.prev=19,e.next=22,fetch("http://localhost:1234/hotels/"+c+"/employees",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employee_sin:Ne,manager_sin:o,name:Te,address:De,salary:i,job_title:We})});case 22:201===e.sent.status?(s("Successfully added employee","success"),(l=Object(v.a)(m)).push({employee_sin:Ne,employee_name:Te,employee_address:De,salary:i,job_title:We}),b(l),$e()):s("Error: Unable to add employee","error"),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(19),console.error("Error:",e.t0),s("Error: Unable to add employee","error");case 30:e.next=43;break;case 32:return e.prev=32,e.next=35,fetch("http://localhost:1234/hotels/"+c+"/employees/"+Ne,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({manager_sin:o,name:Te,address:De,salary:i,job_title:We,status:"hired"})});case 35:204===e.sent.status?(s("Successfully added employee","success"),(u=Object(v.a)(m)).push({employee_sin:Ne,employee_name:Te,employee_address:De,salary:i,job_title:We}),b(u),$e()):s("Error: Unable to add employee","error"),e.next=43;break;case 39:e.prev=39,e.t1=e.catch(32),console.error("Error:",e.t1),s("Error: Unable to add employee","error");case 43:he(!1);case 44:case"end":return e.stop()}}),e,null,[[19,26],[32,39]])})))).apply(this,arguments)}function $e(){a(!1),y(!1),k(!1),w(!1),P(!1),F(!1),de(!1),X(""),V(""),Z(""),ie(""),ne(""),Se(""),Ee(""),Re(""),ze(""),Ie(""),ge(!1),he(!0)}return Object(j.jsxs)(U.a,{onClose:function(){return $e()},"aria-labelledby":"simple-dialog-title",open:t,children:[Object(j.jsx)(J.a,{id:"dialog-title",className:r.dialogTitle,children:Object(j.jsx)(l.a,{className:r.dialogTitle,children:"Add New Employee"})}),Object(j.jsxs)("div",{className:r.dialogAddress,children:[Object(j.jsx)(u.a,{label:"Employee SIN",variant:"outlined",value:Ne,error:g,helperText:G,onChange:function(e){Se(e.currentTarget.value),he(!0),ge(!1)}}),Object(j.jsx)("br",{}),Object(j.jsx)(d.a,{variant:"contained",disabled:ue,onClick:function(){return Ue.apply(this,arguments)},children:"Check SIN"}),Object(j.jsx)("br",{}),fe?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(u.a,{label:"Name",variant:"outlined",value:Te,error:C,helperText:Y,onChange:function(e){return Ie(e.currentTarget.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)(u.a,{label:"Address",variant:"outlined",value:De,error:_,helperText:Q,onChange:function(e){return Ee(e.currentTarget.value)}}),Object(j.jsx)("br",{}),Object(j.jsx)(u.a,{label:"Salary",variant:"outlined",value:Be,error:A,helperText:ae,type:"number",onChange:function(e){return Re(e.currentTarget.value)},InputProps:{startAdornment:Object(j.jsx)(be.a,{position:"start",children:"$"})}}),Object(j.jsx)("br",{}),Object(j.jsx)(u.a,{label:"Job Title",variant:"outlined",value:We,error:M,helperText:ce,onChange:function(e){return ze(e.currentTarget.value)}}),Object(j.jsx)("br",{})]}):Object(j.jsx)(j.Fragment,{})]}),Object(j.jsxs)($.a,{children:[Object(j.jsx)(d.a,{disabled:pe,onClick:function(){return function(){return Je.apply(this,arguments)}()},variant:"contained",color:"primary",children:"Create Profile"}),Object(j.jsx)(d.a,{onClick:function(){a(!1)},variant:"contained",color:"secondary",children:"Cancel"})]})]})};a(190).config();var Oe=Object(o.a)((function(){return{title:{fontSize:"2.5em",fontWeight:"bold",paddingLeft:"1em"}}}));function xe(){var e=Oe();return Object(j.jsx)(p.a,{position:"static",children:Object(j.jsx)(l.a,{className:e.title,children:"ExpressBook Customer Portal"})})}function fe(){var e=Oe();return Object(j.jsx)(p.a,{position:"static",children:Object(j.jsx)(l.a,{className:e.title,children:"ExpressBook Employee Portal"})})}r.render(Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(s.a,{children:Object(j.jsxs)(c.c,{children:[Object(j.jsx)(c.a,{exact:!0,path:"/ui/employee",component:function(){var e=m(),t=Object(c.f)(),a=Object(n.useState)(""),r=Object(i.a)(a,2),s=r[0],o=r[1],b=Object(n.useState)(!1),p=Object(i.a)(b,2),h=p[0],O=p[1],x=Object(n.useState)(""),f=Object(i.a)(x,2),g=f[0],y=f[1],v=/^[0-9]{3}-[0-9]{3}-[0-9]{3}$/;function N(){return!v.test(s)&&0!==s.length}function S(){O(!0),fetch("http://localhost:1234/employees/"+s).then((function(e){200===e.status?e.json().then((function(e){"hired"===e.status?t.push("/ui/employee/welcome",{employeeSIN:e.employee_sin,employeeName:e.employee_name,employeeAddress:e.employee_address,salary:e.salary,jobTitle:e.job_title,brandName:e.brand_name,brandID:e.brand_id,hotelID:e.hotel_id,hotelAddress:e.hotel_address}):(y("Unable to sign in. Please contact the hotel manager or database admin if you think this is a problem."),O(!1))})):(y("Unable to sign in. Please contact the hotel manager or database admin if you think this is a problem."),O(!1))})).catch((function(e){console.log("Error:",e),y("Unable to sign in. Please contact the hotel manager or database admin if you think this is a problem."),O(!1)}))}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(fe,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:"Sign In"}),Object(j.jsx)("div",{className:e.sinCentre,children:Object(j.jsx)(l.a,{children:"Please sign in to access the hotel management system:"})}),Object(j.jsx)("div",{className:e.sinCentre,children:Object(j.jsx)(u.a,{error:N(),helperText:N()?"SIN must have format XXX-XXX-XXX":"",onChange:function(e){return o(e.currentTarget.value)},onKeyPress:function(e){return function(e){"Enter"===e.key&&v.test(s)&&S()}(e)},id:"outlined-basic",label:"Social Insurance Number",variant:"outlined",value:s})}),Object(j.jsx)("div",{className:e.buttonCentre,children:Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return S()},disabled:!v.test(s)||h,children:"Sign In"})}),Object(j.jsx)("div",{className:e.sinCentre,children:Object(j.jsx)(l.a,{style:{color:"red"},children:g})})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/employee/welcome",component:function(){var e=re(),t=Object(c.g)(),a=Object(c.f)(),r=Object(n.useState)(!1),s=Object(i.a)(r,2),o=s[0],u=s[1],m=Object(n.useState)(!1),b=Object(i.a)(m,2),p=b[0],h=b[1],f=Object(n.useState)(!1),y=Object(i.a)(f,2),v=y[0],N=y[1],S=t.state.brandName+", "+t.state.hotelAddress;function C(){return(C=Object(x.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,fetch("http://localhost:1234/hotels/"+t.state.hotelID+"/reservations?action=check-in");case 4:if(200===(n=e.sent).status){e.next=8;break}return u(!1),e.abrupt("return");case 8:return e.next=10,n.json();case 10:n=e.sent,a.push("/ui/employee/checkin",{response:n,checkIn:!0,employeeSIN:t.state.employeeSIN}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error:",e.t0),u(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function k(){return(k=Object(x.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,fetch("http://localhost:1234/hotels/"+t.state.hotelID+"/reservations?action=check-out");case 4:if(200===(n=e.sent).status){e.next=8;break}return h(!1),e.abrupt("return");case 8:return e.next=10,n.json();case 10:n=e.sent,a.push("/ui/employee/checkout",{response:n,checkOut:!1,employeeSIN:t.state.employeeSIN}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error:",e.t0),h(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function T(){return"Manager"===t.state.jobTitle?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.a,{className:e.centre,children:"Manager Actions:"}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{className:e.paperContainer,children:Object(j.jsx)(d.a,{variant:"contained",color:"primary",disabled:v,onClick:I,children:"Manage Employees"})})]}):Object(j.jsx)(j.Fragment,{})}function I(){return _.apply(this,arguments)}function _(){return(_=Object(x.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,e.next=4,fetch("http://localhost:1234/hotels/"+t.state.hotelID+"/employees");case 4:if(200===(n=e.sent).status){e.next=8;break}return N(!1),e.abrupt("return");case 8:return e.next=10,n.json();case 10:n=e.sent,a.push("/ui/employee/manageemployee",{response:n,checkIn:!0,managerSIN:t.state.employeeSIN,brandName:t.state.brandName,hotelAddress:t.state.hotelAddress,hotelID:t.state.hotelID}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error:",e.t0),N(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(fe,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:S}),Object(j.jsx)(l.a,{className:e.centre,children:"Your profile:"}),Object(j.jsx)("div",{className:e.paperContainer,children:Object(j.jsxs)(g.a,{elevation:3,className:e.paper,children:[Object(j.jsxs)(l.a,{className:e.inPaper,children:["Name: ",t.state.employeeName]}),Object(j.jsxs)(l.a,{className:e.inPaper,children:["Address: ",t.state.employeeAddress]}),Object(j.jsxs)(l.a,{className:e.inPaper,children:["Job title: ",t.state.jobTitle]}),Object(j.jsxs)(l.a,{className:e.inPaper,children:["Salary: $",t.state.salary]})]})}),Object(j.jsx)("div",{className:e.paperContainer,children:Object(j.jsxs)(ne.a,{display:"flex",flexDirection:"row",p:1,m:1,children:[Object(j.jsx)(ne.a,{p:1,children:Object(j.jsx)(d.a,{variant:"contained",className:e.buttonSpacing,disabled:o,onClick:function(){return function(){return C.apply(this,arguments)}()},children:"Customer Check In"})}),Object(j.jsx)(ne.a,{p:1,children:Object(j.jsx)(d.a,{variant:"contained",className:e.buttonSpacing,disabled:p,onClick:function(){return function(){return k.apply(this,arguments)}()},children:"Customer Check Out"})}),Object(j.jsx)(ne.a,{p:1,children:Object(j.jsx)(d.a,{variant:"contained",className:e.buttonSpacing,onClick:function(){a.push("/ui/employee/managecustomer",{employeeSIN:t.state.employeeSIN,employeeName:t.state.employeeName,jobTitle:t.state.jobTitle,hotelID:t.state.hotelID,brandName:t.state.brandName,address:t.state.hotelAddress})},children:"Manage Customer"})})]})}),Object(j.jsx)("br",{}),Object(j.jsx)(T,{})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/employee/checkin",component:le}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/employee/checkout",component:le}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/employee/managecustomer",component:function(){var e=ue(),t=Object(c.f)(),a=Object(c.g)(),r=Object(n.useState)(""),s=Object(i.a)(r,2),o=s[0],m=s[1],b=Object(n.useState)(!1),p=Object(i.a)(b,2),h=p[0],f=p[1],y=Object(n.useState)(null),v=Object(i.a)(y,2),S=v[0],k=v[1],T=Object(n.useState)(!1),I=Object(i.a)(T,2),_=I[0],w=I[1],D=Object(n.useState)(!1),E=Object(i.a)(D,2),B=E[0],R=E[1],M=Object(n.useState)(!1),F=Object(i.a)(M,2),W=F[0],z=F[1],G=Object(n.useState)(!1),X=Object(i.a)(G,2),L=X[0],H=X[1],U=Object(n.useState)(""),J=Object(i.a)(U,2),$=J[0],Y=J[1],V=Object(n.useState)("success"),K=Object(i.a)(V,2),q=K[0],Q=K[1],Z=Object(n.useState)(""),ee=Object(i.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(""),re=Object(i.a)(ne,2),se=re[0],ce=re[1],ie=Object(n.useState)(""),oe=Object(i.a)(ie,2),le=oe[0],je=oe[1],me=Object(n.useState)(""),be=Object(i.a)(me,2),pe=be[0],he=be[1],Oe=/^[0-9]{3}-[0-9]{3}-[0-9]{3}$/;function xe(){return!Oe.test(o)&&0!==o.length}function ge(){H(!1)}function ye(){return null===S?Object(j.jsx)(j.Fragment,{}):S.hasOwnProperty("error")?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.a,{className:e.subTitle,align:"center",children:"Customer not found. Try searching a different social insurance number, or create a new customer profile:"}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{className:e.paperContainer,children:Object(j.jsx)(d.a,{variant:"contained",onClick:function(){ae(""),ce(""),je(""),he(""),z(!0)},children:"Create Customer Account"})})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(l.a,{className:e.subTitle,align:"center",children:["Customer: ","customer_name"in S?S.customer_name:""]}),Object(j.jsx)("div",{className:e.paperContainer,children:Object(j.jsxs)(g.a,{elevation:3,className:e.paper,children:[Object(j.jsxs)(l.a,{className:e.inPaper,children:["Address: ","customer_address"in S?S.customer_address:""]}),Object(j.jsxs)(l.a,{className:e.inPaper,children:["Email: ","customer_email"in S?S.customer_email:""]}),Object(j.jsxs)(l.a,{className:e.inPaper,children:["Phone number: ","customer_phone"in S?S.customer_phone:""]})]})}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{className:e.paperContainer,children:Object(j.jsx)(d.a,{variant:"contained",disabled:_,onClick:ve,children:"View Customer Bookings"})}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{className:e.paperContainer,children:Object(j.jsx)(d.a,{variant:"contained",disabled:B,onClick:Se,children:"Create Booking for Customer"})})]})}function ve(){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(x.a)(O.a.mark((function e(){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===S||!("customer_name"in S)){e.next=19;break}return w(!0),e.prev=2,e.next=5,fetch("http://localhost:1234/customers/"+S.customer_sin+"/reservations");case 5:if(200===(a=e.sent).status){e.next=9;break}return w(!1),e.abrupt("return");case 9:return e.next=11,a.json();case 11:a=e.sent,t.push("/ui/employee/reservations",{customerName:S.customer_name,customerSIN:S.customer_sin,response:a,isCustomer:!1}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.error("Error:",e.t0),w(!1);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function Se(){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(x.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.prev=1,e.next=4,fetch("http://localhost:1234/hotels/"+a.state.hotelID+"/rooms");case 4:if(200===(n=e.sent).status&&null!==S&&"customer_name"in S){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,n.json();case 9:n=e.sent,t.push("/ui/employee/rooms",{customerSIN:S.customer_sin,customerName:S.customer_name,customerAddress:S.customer_address,customerEmail:S.customer_email,customerPhone:S.customer_phone,response:n,brandName:a.state.brandName,address:a.state.address,hotelID:a.state.hotelID,employeeName:a.state.employeeName,jobTitle:a.state.jobTitle,employeeSIN:a.state.employeeSIN}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("Error:",e.t0);case 16:R(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function ke(){f(!0),fetch("http://localhost:1234/customers/"+o).then((function(e){200===e.status||404===e.status?e.json().then((function(e){k(e)})):console.error("Error: unable to get customer info")})).catch((function(e){console.error("Error:",e)})),f(!1)}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(fe,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:"Manage Customer"}),Object(j.jsxs)(N.a,{className:e.gridParent,children:[Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(l.a,{children:"Enter customer SIN:"})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(u.a,{error:xe(),helperText:xe()?"SIN must have format XXX-XXX-XXX":"",onChange:function(e){return m(e.currentTarget.value)},onKeyPress:function(e){return function(e){"Enter"===e.key&&Oe.test(o)&&ke()}(e)},id:"outlined-basic",label:"Social Insurance Number",variant:"outlined",value:o})}),Object(j.jsx)(C.a,{container:!0,item:!0,alignItems:"center",xs:2,className:e.dateGrid,children:Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return ke()},disabled:!Oe.test(o)||h,children:"Find Customer"})})]}),Object(j.jsx)(ye,{}),Object(j.jsx)(de,{dialogOpen:W,setDialogOpen:z,classes:e,setAlertMessage:Y,setAlertStatus:Q,setAlertOpen:H,setCustomerData:k,customerName:te,setCustomerName:ae,customerSIN:o,customerAddress:se,setCustomerAddress:ce,customerEmail:le,setCustomerEmail:je,customerPhone:pe,setCustomerPhone:he}),Object(j.jsx)(A.a,{open:L,autoHideDuration:6e3,onClose:ge,children:Object(j.jsx)(P.a,{onClose:ge,severity:q,children:$})})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/employee/reservations",component:X}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/employee/rooms",component:ae}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/employee/manageemployee",component:function(){for(var e=pe(),t=Object(c.g)(),a=[],r=0;r<t.state.response.length;r++)t.state.response[r].employee_sin===t.state.managerSIN?a.push(!0):a.push(!1);var s=Object(n.useState)(a),o=Object(i.a)(s,2),u=o[0],m=o[1],b=Object(n.useState)(Object(v.a)(t.state.response)),p=Object(i.a)(b,2),h=p[0],f=p[1],y=Object(n.useState)(!1),T=Object(i.a)(y,2),I=T[0],_=T[1],w=Object(n.useState)(""),D=Object(i.a)(w,2),E=D[0],B=D[1],R=Object(n.useState)("success"),M=Object(i.a)(R,2),F=M[0],W=M[1],z=Object(n.useState)(!1),G=Object(i.a)(z,2),X=G[0],L=G[1];function H(e,t){B(e),W(t),_(!0)}function U(){_(!1)}function J(){return(J=Object(x.a)(O.a.mark((function e(a,n){var r,s,c,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object(v.a)(u))[n]=!0,m(r),e.prev=3,e.next=6,fetch("http://localhost:1234/hotels/"+t.state.hotelID+"/employees/"+a.employee_sin,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({manager_sin:t.state.managerSIN})});case 6:if(204===e.sent.status){e.next=13;break}return(s=Object(v.a)(u))[n]=!1,m(s),H("Error: Failed to remove employee","error"),e.abrupt("return");case 13:c=Object(v.a)(u),i=Object(v.a)(h),c.splice(n,1),i.splice(n,1),m(c),f(i),H("Successfully removed employee","success"),e.next=29;break;case 22:e.prev=22,e.t0=e.catch(3),console.error("Error:",e.t0),(o=Object(v.a)(u))[n]=!1,m(o),H("Error: Failed to remove employee","error");case 29:case"end":return e.stop()}}),e,null,[[3,22]])})))).apply(this,arguments)}return Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(fe,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:"Hotel Employees"}),Object(j.jsx)(l.a,{className:e.subTitle,children:t.state.brandName+", "+t.state.hotelAddress}),Object(j.jsx)("div",{className:e.subTitle,children:Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return L(!0)},children:"New Employee"})}),Object(j.jsx)(N.a,{cols:1,cellHeight:185,className:e.grid,children:h.map((function(t,a){return Object(j.jsx)(S.a,{cols:1,children:Object(j.jsx)(g.a,{elevation:3,className:e.brandPaper,children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:e.brandGrid,children:[Object(j.jsx)(l.a,{className:e.empName,children:t.employee_name}),Object(j.jsx)(l.a,{children:t.job_title}),Object(j.jsxs)(l.a,{children:["SIN: ",t.employee_sin]}),Object(j.jsxs)(l.a,{children:["Address: ",t.employee_address]}),Object(j.jsxs)(l.a,{children:["Salary: $",t.salary]})]}),Object(j.jsx)(k.a,{orientation:"vertical",flexItem:!0,className:e.divider}),Object(j.jsx)(C.a,{item:!0,xs:2,children:Object(j.jsx)(C.a,{className:e.priceDiv,children:Object(j.jsx)(d.a,{variant:"contained",color:"secondary",disabled:u[a],onClick:function(){return function(e,t){return J.apply(this,arguments)}(t,a)},children:"Delete"})})})]})},t.employee_sin)},t.employee_sin)}))}),Object(j.jsx)(he,{dialogOpen:X,setDialogOpen:L,classes:e,openAlert:H,hotelID:t.state.hotelID,employees:h,managerSIN:t.state.managerSIN,setEmployees:f}),Object(j.jsx)(A.a,{open:I,autoHideDuration:6e3,onClose:U,children:Object(j.jsx)(P.a,{onClose:U,severity:F,children:E})})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer",component:function(){var e=b(),t=Object(c.f)(),a=Object(n.useState)(""),r=Object(i.a)(a,2),s=r[0],o=r[1],m=Object(n.useState)(!1),p=Object(i.a)(m,2),h=p[0],O=p[1],x=/^[0-9]{3}-[0-9]{3}-[0-9]{3}$/;function f(){return!x.test(s)&&0!==s.length}function g(){O(!0),fetch("http://localhost:1234/customers/"+s).then((function(e){404===e.status?t.push("/ui/customer/name",{customerSIN:s}):e.json().then((function(e){t.push("/ui/customer/welcome",{customerSIN:e.customer_sin,customerName:e.customer_name,customerAddress:e.customer_address,customerEmail:e.customer_email,customerPhone:e.customer_phone})}))})).catch((function(e){console.log("Error:",e),O(!1)}))}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(xe,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:"Sign In"}),Object(j.jsx)("div",{className:e.sinCentre,children:Object(j.jsx)(l.a,{children:"To begin searching destinations, enter your social insurance number:"})}),Object(j.jsx)("div",{className:e.sinCentre,children:Object(j.jsx)(u.a,{error:f(),helperText:f()?"SIN must have format XXX-XXX-XXX":"",onChange:function(e){return o(e.currentTarget.value)},onKeyPress:function(e){return function(e){"Enter"===e.key&&x.test(s)&&g()}(e)},id:"outlined-basic",label:"Social Insurance Number",variant:"outlined",value:s})}),Object(j.jsx)("div",{className:e.buttonCentre,children:Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return g()},disabled:!x.test(s)||h,children:"Sign In"})})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/name",component:function(){var e=f(),t=Object(c.g)(),a=Object(c.f)(),r=Object(n.useState)(""),s=Object(i.a)(r,2),o=s[0],m=s[1],b=Object(n.useState)(""),p=Object(i.a)(b,2),h=p[0],g=p[1],y=Object(n.useState)(""),v=Object(i.a)(y,2),N=v[0],S=v[1],C=Object(n.useState)(""),k=Object(i.a)(C,2),T=k[0],I=k[1],_=Object(n.useState)(!1),w=Object(i.a)(_,2),D=w[0],E=w[1],A=Object(n.useState)(!1),P=Object(i.a)(A,2),B=P[0],R=P[1],M=Object(n.useState)(!1),F=Object(i.a)(M,2),W=F[0],z=F[1],G=Object(n.useState)(!1),X=Object(i.a)(G,2),L=X[0],H=X[1],U=Object(n.useState)(!1),J=Object(i.a)(U,2),$=J[0],Y=J[1];function V(){return(V=Object(x.a)(O.a.mark((function e(){var n,r,s,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0===o.length,r=0===h.length,(s=N.includes(" ")||N.indexOf("@")<1)||((c=N.indexOf(".",N.indexOf("@")))<3||c===N.length-1)&&(s=!0),i=!/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/.test(T),E(n),R(r),z(s),H(i),!(n||r||s||i)){e.next=11;break}return e.abrupt("return");case 11:if(0!==o.length||0!==h.length){e.next=16;break}E(!0),R(!0),e.next=38;break;case 16:if(0===o.length||0!==h.length){e.next=21;break}E(!1),R(!0),e.next=38;break;case 21:if(0!==o.length||0===h.length){e.next=26;break}E(!0),R(!1),e.next=38;break;case 26:return Y(!0),e.prev=27,e.next=30,fetch("http://localhost:1234/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_sin:t.state.customerSIN,customer_name:o,customer_address:h,customer_email:N,customer_phone:T})});case 30:201===e.sent.status&&a.push("/ui/customer/welcome",{customerSIN:t.state.customerSIN,customerName:o,customerAddress:h,customerEmail:N,customerPhone:T}),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(27),console.error("Error:",e.t0),Y(!1);case 38:case"end":return e.stop()}}),e,null,[[27,34]])})))).apply(this,arguments)}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(xe,{}),Object(j.jsx)("div",{className:e.centre,children:Object(j.jsx)(l.a,{children:"Welcome to ExpressBook. Please provide some information about yourself:"})}),Object(j.jsx)("div",{className:e.textField,children:Object(j.jsx)(u.a,{label:"Full Name",variant:"outlined",value:o,error:D,helperText:D?"Must provide name":"",onChange:function(e){return m(e.currentTarget.value)}})}),Object(j.jsx)("div",{className:e.textField,children:Object(j.jsx)(u.a,{label:"Address",variant:"outlined",value:h,error:B,helperText:B?"Must provide address":"",onChange:function(e){return g(e.currentTarget.value)}})}),Object(j.jsx)("div",{className:e.textField,children:Object(j.jsx)(u.a,{label:"Email",variant:"outlined",value:N,error:W,helperText:W?"Must provide valid email":"",onChange:function(e){return S(e.currentTarget.value)}})}),Object(j.jsx)("div",{className:e.textField,children:Object(j.jsx)(u.a,{label:"Phone Number",variant:"outlined",value:T,error:L,helperText:L?"Must provide valid phone number":"",onChange:function(e){return I(e.currentTarget.value)}})}),Object(j.jsx)("div",{className:e.buttonCentre,children:Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return function(){return V.apply(this,arguments)}()},disabled:$,children:"Sign In"})})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/welcome",component:function(){var e=y(),t=Object(c.g)(),a=Object(c.f)(),r=Object(n.useState)(!1),s=Object(i.a)(r,2),o=s[0],u=s[1],m=Object(n.useState)(!1),b=Object(i.a)(m,2),p=b[0],h=b[1],f="Welcome, "+t.state.customerName;function v(){return(v=Object(x.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,fetch("http://localhost:1234/brands");case 4:if(200===(n=e.sent).status){e.next=8;break}return u(!1),e.abrupt("return");case 8:return e.next=10,n.json();case 10:n=e.sent,a.push("/ui/customer/brands",{customerSIN:t.state.customerSIN,customerAddress:t.state.customerAddress,customerName:t.state.customerName,customerEmail:t.state.customerEmail,customerPhone:t.state.customerPhone,response:n}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error:",e.t0),u(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function N(){return(N=Object(x.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,fetch("http://localhost:1234/customers/"+t.state.customerSIN+"/reservations");case 4:if(200===(n=e.sent).status){e.next=8;break}return h(!1),e.abrupt("return");case 8:return e.next=10,n.json();case 10:n=e.sent,a.push("/ui/customer/reservations",{customerName:t.state.customerName,customerSIN:t.state.customerSIN,response:n,isCustomer:!0}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Error:",e.t0),h(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(xe,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:f}),Object(j.jsx)(l.a,{className:e.centre,children:"Your profile:"}),Object(j.jsx)("div",{className:e.paperContainer,children:Object(j.jsxs)(g.a,{elevation:3,className:e.paper,children:[Object(j.jsxs)(l.a,{className:e.inPaper,children:["Address: ",t.state.customerAddress]}),Object(j.jsxs)(l.a,{className:e.inPaper,children:["Email: ",t.state.customerEmail]}),Object(j.jsxs)(l.a,{className:e.inPaper,children:["Phone number: ",t.state.customerPhone]})]})}),Object(j.jsxs)("div",{className:e.buttonCentre,children:[Object(j.jsx)(d.a,{variant:"contained",className:e.buttonSpacing,onClick:function(){return function(){return v.apply(this,arguments)}()},disabled:o,children:"Find A Hotel"}),Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return function(){return N.apply(this,arguments)}()},disabled:p,children:"My Reservations"})]})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/brands",component:function(){for(var e=T(),t=Object(c.g)(),a=Object(c.f)(),r=[],s=0;s<t.state.response.length;s++)r.push(!1);var o=Object(n.useState)(r),u=Object(i.a)(o,2),m=u[0],b=u[1];function p(){return(p=Object(x.a)(O.a.mark((function e(n){var r,s,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object(v.a)(m))[n]=!0,b(r),e.prev=3,e.next=6,fetch("http://localhost:1234/brands/"+t.state.response[n].brand_id+"/hotels");case 6:if(200===(s=e.sent).status){e.next=12;break}return(c=Object(v.a)(m))[n]=!1,b(c),e.abrupt("return");case 12:return e.next=14,s.json();case 14:s=e.sent,a.push("/ui/customer/hotels",{customerSIN:t.state.customerSIN,customerName:t.state.customerName,customerAddress:t.state.customerAddress,customerEmail:t.state.customerEmail,customerPhone:t.state.customerPhone,response:s,brandName:t.state.response[n].name}),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("Error:",e.t0),(i=Object(v.a)(m))[n]=!1,b(i);case 24:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}return Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(xe,{}),Object(j.jsx)(l.a,{className:e.centreTitle,children:"Select a hotel brand to view hotels:"}),Object(j.jsx)(N.a,{cols:1,cellHeight:200,className:e.grid,children:t.state.response.map((function(t,a){return Object(j.jsx)(S.a,{cols:1,children:Object(j.jsx)(g.a,{elevation:3,className:e.brandPaper,children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:e.brandGrid,children:[Object(j.jsx)(l.a,{className:e.hotelTitle,children:t.name}),Object(j.jsxs)(l.a,{children:["Headquarters Address: ",t.main_office_address]}),Object(j.jsxs)(l.a,{children:["Email: ",t.email_address]}),Object(j.jsxs)(l.a,{children:["Phone: ",t.phone_number]}),Object(j.jsxs)(l.a,{children:["Number of hotels: ",t.number_of_hotels]})]}),Object(j.jsx)(k.a,{orientation:"vertical",flexItem:!0,className:e.divider}),Object(j.jsx)(C.a,{item:!0,xs:2,children:Object(j.jsx)(C.a,{className:e.priceDiv,children:Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return function(e){return p.apply(this,arguments)}(a)},disabled:m[a],children:"Select"})})})]})},t.brand_id)},t.brand_id)}))})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/hotels",component:function(){for(var e=_(),t=Object(c.g)(),a=Object(c.f)(),r=[],s=0;s<t.state.response.length;s++)r.push(!1);var o=Object(n.useState)(r),u=Object(i.a)(o,2),m=u[0],b=u[1];function p(){return(p=Object(x.a)(O.a.mark((function e(n){var r,s,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Object(v.a)(m))[n]=!0,b(r),e.prev=3,e.next=6,fetch("http://localhost:1234/hotels/"+t.state.response[n].hotel_id+"/rooms");case 6:if(200===(s=e.sent).status){e.next=12;break}return(c=Object(v.a)(m))[n]=!1,b(c),e.abrupt("return");case 12:return e.next=14,s.json();case 14:s=e.sent,a.push("/ui/customer/rooms",{customerSIN:t.state.customerSIN,customerName:t.state.customerName,customerAddress:t.state.customerAddress,customerEmail:t.state.customerEmail,customerPhone:t.state.customerPhone,response:s,brandName:t.state.brandName,address:t.state.response[n].physical_address,hotelID:t.state.response[n].hotel_id}),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("Error:",e.t0),(i=Object(v.a)(m))[n]=!1,b(i);case 24:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}return Object(j.jsxs)("div",{className:e.root,children:[Object(j.jsx)(xe,{}),Object(j.jsxs)(l.a,{className:e.centreTitle,children:[t.state.brandName," Hotels"]}),Object(j.jsx)(N.a,{cols:1,cellHeight:175,className:e.grid,children:t.state.response.map((function(t,a){return Object(j.jsx)(S.a,{cols:1,children:Object(j.jsx)(g.a,{elevation:3,className:e.brandPaper,children:Object(j.jsxs)(C.a,{container:!0,spacing:2,alignItems:"center",children:[Object(j.jsxs)(C.a,{className:e.hotelGrid,children:[Object(j.jsx)(l.a,{className:e.hotelTitle,children:t.physical_address}),Object(j.jsxs)(l.a,{children:["Email: ",t.email_address]}),Object(j.jsxs)(l.a,{children:["Phone: ",t.phone_number]}),Object(j.jsxs)(l.a,{children:["Number of rooms: ",t.number_of_rooms]})]}),Object(j.jsx)(k.a,{orientation:"vertical",flexItem:!0,className:e.divider}),Object(j.jsx)(C.a,{item:!0,xs:2,children:Object(j.jsxs)(C.a,{className:e.priceDiv,children:[Object(j.jsx)(I.a,{value:t.star_category,readOnly:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),Object(j.jsx)(d.a,{variant:"contained",onClick:function(){return function(e){return p.apply(this,arguments)}(a)},disabled:m[a],children:"View Details"})]})})]})},t.hotel_id)},t.hotel_id)}))})]})}}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/reservations",component:X}),Object(j.jsx)(c.a,{exact:!0,path:"/ui/customer/rooms",component:ae})]})})}),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.9e99fd49.chunk.js.map